{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<ul> <li> <p>\ud83e\udde0 Smart PR Migration</p> <p>Open PRs with existing branches become GitHub PRs, closed PRs become Issues with full metadata preservation. No more broken references or lost context.</p> </li> <li> <p>\ud83d\udee1\ufe0f Safe by Design</p> <p>Conservative approach prevents re-merging closed PRs. Comprehensive dry-run validation ensures successful migrations.</p> </li> <li> <p>\ud83d\udd0d Pre-Migration Audit</p> <p>See exactly what will migrate before you start. Get user mapping recommendations and gap analysis automatically.</p> </li> <li> <p>\ud83d\udd17 Automatic Link Rewriting</p> <p>Cross-references between issues and PRs are automatically updated to point to GitHub while preserving original context.</p> </li> <li> <p>\ud83d\udc65 Intelligent User Mapping</p> <p>Maps Bitbucket users to GitHub accounts with support for display names, usernames, and account IDs. Handles @mentions and attribution correctly.</p> </li> <li> <p>\ud83d\udcce Advanced Attachment Handling</p> <p>Downloads all attachments and inline images with informative comments for manual upload.</p> </li> <li> <p>\ud83c\udfd7\ufe0f Multi-Repository Support</p> <p>Migrate multiple interconnected repositories with automatic cross-repository link rewriting and unified configuration management.</p> </li> </ul>"},{"location":"#bitbucket-github-migration-tools","title":"Bitbucket \u2192 GitHub Migration Tools","text":"<p>Intelligent \u2022 Safe \u2022 Comprehensive</p> <p>Migrate your Bitbucket Cloud repositories to GitHub with confidence using our comprehensive migration platform that preserves metadata, comments, attachments, and cross-references while making intelligent decisions about PRs, branches, and user attribution. Supports both single and multi-repository migrations with unified configuration management.</p> <p>\ud83d\ude80 Get Started \u2022 \ud83d\udcd6 Full Guide</p>"},{"location":"#key-features","title":"\u26a1 Key Features","text":""},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":"<p>Install: <pre><code>pipx install bitbucket-migration\n</code></pre></p> <p>Example Usage: <pre><code>migrate_bitbucket_to_github audit --workspace YOUR_WORKSPACE --repo YOUR_REPO --email YOUR_EMAIL\nmigrate_bitbucket_to_github migrate --config migration_config.json --dry-run\n</code></pre></p>"},{"location":"#documentation","title":"\ud83d\udcda Documentation","text":"<ul> <li> <p>\ud83d\udcd6 Migration Guide</p> <p>Complete step-by-step migration process with detailed explanations, checklists, troubleshooting, and attachment upload instructions.</p> </li> <li> <p>\u2699\ufe0f Migration Config</p> <p>Configuration file format, user mapping, and repository mapping options.</p> </li> <li> <p>\ud83d\udccb Migration Details</p> <p>Detailed reference on what metadata is preserved and how non-migratable information is handled.</p> </li> <li> <p>\ud83d\udda5\ufe0f CLI Reference</p> <p>Command-line interface guide for audit, migration, and authentication scripts.</p> </li> <li> <p>\ud83d\udc65 User Mapping</p> <p>How to map Bitbucket users to GitHub accounts and handle unmapped users.</p> </li> <li> <p>\ud83d\udd11 API Tokens</p> <p>Setup guides for Bitbucket and GitHub API authentication.</p> </li> </ul> <p>Built with \u2764\ufe0f for reliable repository migrations</p> <p>\ud83d\udc1b Report Issues \u2022 \ud83d\udcda API References</p>"},{"location":"migration_guide/","title":"Bitbucket \u2192 GitHub Migration Guide","text":"<p>Version: 1.0\u2003\u2003Last Updated: 2025-11-05</p>"},{"location":"migration_guide/#overview","title":"Overview","text":"<p>This guide explains how to migrate a Bitbucket Cloud repository to GitHub, preserving:</p> <ul> <li>Git history (branches, tags, commits)</li> <li>Issues, pull requests, and comments</li> <li>Attachments (manual upload required)</li> <li>Author and timestamp metadata (as text)</li> </ul> <p>Important Safety Note</p> <p>Keep your Bitbucket repository intact (potentially archived) until migration is fully verified. If errors occur and migration is only partially completed, delete the GitHub repository and start fresh.</p>"},{"location":"migration_guide/#migration-workflow-overview","title":"Migration Workflow Overview","text":"<p>This guide covers both single and multi-repository migrations. The basic workflow is the same for all cases, with additional steps for multi-repository scenarios.</p>"},{"location":"migration_guide/#standard-migration-workflow","title":"Standard Migration Workflow","text":"<ol> <li>Audit Repository - Analyze the repository and generate configuration</li> <li>Mirror Git Repository - Copy commits, branches, and tags to GitHub</li> <li>Configure Migration - Update tokens, user mappings, and settings</li> <li>Dry Run Validation - Test the migration without making changes</li> <li>Execute Migration - Migrate issues, PRs, comments, and attachments</li> <li>Upload Attachments - Handle file attachments (automated or manual)</li> <li>Verify and Clean Up - Confirm success and clean up temporary files</li> </ol>"},{"location":"migration_guide/#multi-repository-migration-two-phase","title":"Multi-Repository Migration (Two-Phase)","text":"<p>For migrating multiple repositories that reference each other:</p> <p>Phase 1: Repository Migration</p> <ul> <li>Migrate each repository individually</li> <li>Creates all issues/PRs with correct same-repository links</li> <li>Cross-repository links remain as Bitbucket URLs (tracked for Phase 2)</li> <li>Generates <code>cross_repo_mappings.json</code> with issue/PR number mappings</li> </ul> <p>Phase 2: Cross-Repository Link Updates</p> <ul> <li>Run only after ALL repositories are migrated</li> <li>Use the <code>cross-link</code> subcommand</li> <li>Updates ONLY cross-repository links using mappings from all repositories</li> <li>No new issues/PRs created - only existing content modified</li> </ul>"},{"location":"migration_guide/#installation-and-setup","title":"Installation and Setup","text":"<ol> <li> <p>Install from PyPI (Recommended):      <pre><code>pipx install bitbucket-migration\n</code></pre>      Then use as follows. See CLI Reference Guide for detailed description      of the command line interface of the included scripts.      <pre><code>migrate_bitbucket_to_github audit --workspace YOUR_WORKSPACE --repo YOUR_REPO\nmigrate_bitbucket_to_github migrate --config migration_config.json --dry-run\n</code></pre></p> Alternative installation methods <p>Run Directly <pre><code>pipx run bitbucket-migration migrate_bitbucket_to_github audit --workspace YOUR_WORKSPACE --repo YOUR_REPO\n</code></pre></p> <p>From Source <pre><code>git clone https://github.com/fkloosterman/bitbucket-migration.git\ncd bitbucket-migration\npython migrate_bitbucket_to_github.py audit --workspace YOUR_WORKSPACE --repo YOUR_REPO\n</code></pre></p> </li> <li> <p>Set up Bitbucket and Github Tokens</p> <p>You will need a Bitbucket Cloud API Token (read access to repos, issues, PRs) and a GitHub Personal Access Token (PAT) with <code>repo</code> scope.</p> <p>See API Tokens Setup Guide for instructions on how to setup these tokens and to verify access.</p> </li> </ol>"},{"location":"migration_guide/#migration-steps","title":"Migration Steps","text":"<pre><code>graph TD\n    A[Audit Repository] --&gt; B[Mirror Git Repository]\n    B --&gt; C[Configure Migration]\n    C --&gt; D[Dry Run Validation]\n    D --&gt;|Issues found| C\n    D --&gt; E[Execute Migration]\n    E --&gt; F[Upload Attachments]\n    F --&gt; G[Verify &amp; Clean Up]\n\n    E --&gt; H[Cross-Link Processing&lt;br/&gt;Multi-Repo Only]\n    H --&gt; G\n\n    classDef stepBox fill:#e1f5fe,stroke:#01579b,stroke-width:2px\n    classDef multiRepo fill:#fff3e0,stroke:#e65100,stroke-width:2px\n\n    class A,B,C,D,E,F,G stepBox\n    class H multiRepo</code></pre> <p>Key Steps:</p> <ol> <li>Audit Repository - Generate configuration and analyze repository</li> <li>Mirror Git Repository - Copy commits, branches, and tags</li> <li>Configure Migration - Set tokens, user mappings, and settings</li> <li>Dry Run Validation - Test configuration without making changes</li> <li>Execute Migration - Migrate issues, PRs, comments, and attachments</li> <li>Upload Attachments - Handle file attachments (automated or manual)</li> <li>Verify &amp; Clean Up - Confirm success and clean up temporary files</li> </ol> <p>Multi-Repository Only: Cross-Link Processing updates cross-repository references after all repositories are migrated.</p>"},{"location":"migration_guide/#step-by-step-migration","title":"Step-by-Step Migration","text":""},{"location":"migration_guide/#step-1-run-audit","title":"Step 1 \u2014 Run Audit","text":"<p>Generates the initial configuration and user mapping.</p> <pre><code>migrate_bitbucket_to_github audit \\\n  --workspace WORKSPACE \\\n  --repo REPO \\\n  --email YOU@DOMAIN \\\n  --gh-owner GITHUB_USER \\\n  --gh-repo REPO\n</code></pre> <p>For multiple repositories: <pre><code># Auto-discover all repositories in workspace\nmigrate_bitbucket_to_github audit \\\n  --workspace WORKSPACE \\\n  --discover \\\n  --email YOU@DOMAIN \\\n  --gh-owner GITHUB_USER \\\n  --base-dir ./migration_workspace\n\n# Or specify multiple repositories explicitly\nmigrate_bitbucket_to_github audit \\\n  --workspace WORKSPACE \\\n  --repo repo1 --repo repo2 --repo repo3 \\\n  --email YOU@DOMAIN \\\n  --gh-owner GITHUB_USER \\\n  --base-dir ./migration_workspace\n</code></pre></p> <p>Generated Files</p> <p>The audit command creates several files that you will need to review and modify:</p> <ul> <li><code>migration_config.json</code> \u2013 Configuration file that you must customize</li> <li>Set your API tokens</li> <li>Configure user mappings</li> <li>Adjust migration options</li> <li>Define repository mappings (for multi-repo)</li> <li><code>audit_report.md</code> \u2013 Analysis and recommendations</li> <li><code>user_mapping_template.txt</code> \u2013 List of contributors found</li> </ul> <p>Important: You must edit <code>migration_config.json</code> before running migration. This file contains your API tokens and user mappings, and is required for the migration to work.</p> <p>Next: Edit the config file to map Bitbucket users to GitHub accounts (see Step 3). See User Mapping Reference.</p>"},{"location":"migration_guide/#step-2-mirror-repository","title":"Step 2 \u2014 Mirror Repository","text":"<ol> <li>Create an empty repository on GitHub.    Do not add a README or license.</li> <li>Keep it private until migration is complete.</li> </ol> <pre><code>git clone --mirror https://bitbucket.org/WORKSPACE/REPO.git\ncd REPO.git\ngit remote add github https://github.com/OWNER/REPO.git\ngit push --mirror github\n</code></pre> <p>Verify:</p> <pre><code>git ls-remote github\n</code></pre>"},{"location":"migration_guide/#step-3-tailor-configuration","title":"Step 3 - Tailor Configuration","text":"<p>Edit <code>migration_config.json</code> to set your tokens and user mappings. See Migration Config Reference for full details.</p> <ol> <li> <p>Update Tokens</p> <ul> <li>Set <code>bitbucket.token</code> to your Bitbucket API token.</li> <li>Set <code>github.token</code> to your GitHub PAT with <code>repo</code> scope.</li> </ul> </li> <li> <p>Configure User Mapping</p> <ul> <li>Map Bitbucket display names to GitHub usernames in <code>user_mapping</code>.</li> <li>Set unmapped or deleted users to <code>null</code>.</li> </ul> </li> <li> <p>Configure Repository Mapping (Multi-Repo Only)</p> <ul> <li>For multi-repository migrations, add <code>repository_mapping</code> to map Bitbucket workspace/repo to GitHub owner/repo.</li> <li>This enables cross-repository link rewriting in Phase 2.</li> <li>Each repository needs its own config file generated by audit.</li> </ul> </li> <li> <p>Run Dry Run</p> <ul> <li>After editing, run a dry run (Step 4) to validate.</li> <li>Refine mappings if needed.</li> </ul> </li> </ol> Advanced Options <ul> <li>Add <code>repository_mapping</code> for cross-repository link rewriting.</li> <li>See Migration Config Reference for details.</li> </ul>"},{"location":"migration_guide/#step-4-dry-run-migration","title":"Step 4 \u2014 Dry Run Migration","text":"<p>Run a simulation of the migration to validate your configuration without making any changes.</p> <pre><code>migrate_bitbucket_to_github migrate --config migration_config.json --dry-run\n</code></pre> <p>What it does:</p> <ul> <li>Validates tokens and permissions.</li> <li>Checks user mappings and repository access.</li> <li>Estimates issue/PR counts and migration time.</li> <li>Generates <code>migration_report_dry_run.md</code> with details.</li> </ul> <p>Check for:</p> <ul> <li>Authentication success (no 401/403 errors).</li> <li>Valid user mappings (no unmapped users warnings).</li> <li>Correct counts matching your audit report.</li> <li>If issues, refine <code>migration_config.json</code> and retry.</li> </ul> Advanced Options <ul> <li>Use <code>--skip-issues</code> or <code>--skip-prs</code> to test specific phases.</li> <li>See CLI Reference for all options.</li> </ul>"},{"location":"migration_guide/#step-5-run-full-migration","title":"Step 5 \u2014 Run Full Migration","text":"<p>Execute the actual migration of issues, PRs, comments, and attachments.</p> <pre><code>migrate_bitbucket_to_github migrate \\\n  --config migration_config.json\n</code></pre> <p>For multi-repository migration: <pre><code># Phase 1: Migrate each repository\nmigrate_bitbucket_to_github migrate --config migration_config.json\n# Repeat for each repository...\n\n# Phase 2: Update cross-repository links (after all repos migrated)\nmigrate_bitbucket_to_github cross-link --config migration_config.json\n# Repeat for each repository...\n</code></pre></p> <p>What it does:</p> <ul> <li>Migrates issues and PRs (open PRs stay as PRs; closed PRs become issues).</li> <li>Downloads attachments to <code>attachments_temp/</code>.</li> <li>Generates <code>migration_mapping.json</code> for ID cross-references.</li> <li>Creates <code>migration_report.md</code> with details and any issues.</li> <li>For multi-repo Phase 1: Saves mappings to <code>cross_repo_mappings.json</code> and reports deferred cross-repo links.</li> </ul> Advanced Options <ul> <li>Use <code>--skip-issues</code> or <code>--skip-prs</code> to migrate selectively.</li> <li>For Phase 2 cross-repo link updates: Use separate <code>cross-link</code> subcommand.</li> <li>See CLI Reference for all options.</li> </ul>"},{"location":"migration_guide/#step-6-upload-attachments","title":"Step 6 \u2014 Upload Attachments","text":"<p>Attachments are downloaded locally because GitHub's API doesn't support direct upload. The migration tool creates informative comments on each issue/PR indicating which attachments need to be uploaded.</p>"},{"location":"migration_guide/#attachment-upload-process","title":"Attachment Upload Process","text":"<ol> <li> <p>Locate Files <pre><code>cd attachments_temp/\nls -lh\n</code></pre></p> </li> <li> <p>Identify Targets     Check GitHub issues for comments like:     <pre><code>\ud83d\udcce **Attachment from Bitbucket**: `file.png` (size)\n</code></pre></p> </li> <li> <p>Upload</p> <ul> <li>Drag and drop files into issue comments on GitHub.</li> <li>Files preview inline or as links.</li> </ul> </li> <li> <p>Verify</p> <ul> <li>Confirm uploads in GitHub issues.</li> </ul> </li> </ol> Advanced Options <p>For bulk uploads or prioritization:</p> <p>Prioritization</p> Priority Files Action Critical Screenshots, docs Upload first Optional Old files Skip if needed <p>Tracking &amp; Cleanup</p> <ul> <li>Create <code>attachment-status.md</code> for progress.</li> <li>Backup: <code>tar -czf attachments_backup.tar.gz attachments_temp/</code></li> <li>Delete: <code>rm -rf attachments_temp/</code> after verification.</li> </ul>"},{"location":"migration_guide/#step-7-verify-and-clean-up","title":"Step 7 \u2014 Verify and Clean Up","text":"<p>Confirm migration success and finalize the process.</p> <p>Essential Checks:</p> <ul> <li>Verify Git history: branches, tags, and commits match Bitbucket.</li> <li>Check issue/PR counts and content against audit report.</li> <li>Spot-check user mentions, comments, and timestamps.</li> <li>Confirm attachments are uploaded.</li> </ul> <p>Clean-Up Operations:</p> <ul> <li>Update README with new GitHub links and branch protections.</li> <li>Set Bitbucket repo to read-only or archive it.</li> <li>Clean up migration files: Use <code>migrate_bitbucket_to_github clean</code> with selective filters to remove generated files.</li> <li>Archive migration reports and mappings for reference.</li> </ul>"},{"location":"migration_guide/#enhanced-clean-command","title":"Enhanced Clean Command","text":"<p>The <code>clean</code> subcommand removes output files generated during migration with selective filtering:</p> <pre><code># Remove all generated files except configuration\nmigrate_bitbucket_to_github clean\n\n# Remove everything including configuration files\nmigrate_bitbucket_to_github clean --all\n\n# Clean specific subcommands only\nmigrate_bitbucket_to_github clean --subcommand audit\nmigrate_bitbucket_to_github clean --subcommand migrate\nmigrate_bitbucket_to_github clean --subcommand audit migrate cross-link\n\n# Clean specific repository outputs (with file tracking)\nmigrate_bitbucket_to_github clean --workspace myworkspace --repo myrepo\n\n# Preview cleanup without deleting\nmigrate_bitbucket_to_github clean --dry-run\n</code></pre> <p>What gets cleaned:</p> <ul> <li><code>--subcommand audit</code>: Audit reports and outputs</li> <li><code>--subcommand migrate</code>: Migration reports and outputs</li> <li><code>--subcommand cross-link</code>: Cross-link reports and outputs</li> <li><code>--all</code>: Everything including configuration files</li> </ul> <p>Default behavior: Cleans all outputs but keeps configuration files.</p>"},{"location":"migration_guide/#multi-repository-migration","title":"Multi-Repository Migration","text":"<p>For migrating multiple repositories that reference each other, follow this two-phase workflow:</p>"},{"location":"migration_guide/#phase-1-migrate-all-repositories","title":"Phase 1: Migrate All Repositories","text":"<p>Migrate each repository individually, building the shared mapping file:</p> <pre><code># For each repository, create a config using audit, then migrate:\nmigrate_bitbucket_to_github audit --workspace WORKSPACE --repo repo1 --email YOU@DOMAIN --gh-owner GITHUB_USER --gh-repo repo1\nmigrate_bitbucket_to_github migrate --config migration_config.json\n\n# Repeat for each repository\nmigrate_bitbucket_to_github audit --workspace WORKSPACE --repo repo2 --email YOU@DOMAIN --gh-owner GITHUB_USER --gh-repo repo2\nmigrate_bitbucket_to_github migrate --config migration_config.json\n\n# Continue for all repositories...\n</code></pre> <p>What happens in Phase 1:</p> <ul> <li>\u2705 All issues/PRs created with correct same-repository links</li> <li>\u26a0\ufe0f Cross-repository links remain as Bitbucket URLs</li> <li>\ud83d\udcc4 <code>cross_repo_mappings.json</code> created/updated with issue/PR mappings</li> <li>\ud83d\udcca Migration reports show deferred cross-repo links</li> </ul>"},{"location":"migration_guide/#phase-2-update-cross-repository-links-run-only-after-all-repos-are-migrated","title":"Phase 2: Update Cross-Repository Links (Run Only After All Repos Are Migrated)","text":"<p>After ALL repositories are successfully migrated, update cross-repository links:</p> <pre><code># Run cross-link for each repository (use the same config files from Phase 1)\nmigrate_bitbucket_to_github cross-link --config migration_config.json  # For repo1\nmigrate_bitbucket_to_github cross-link --config migration_config.json  # For repo2\n# Continue for all repositories...\n</code></pre> <p>What happens in Phase 2:</p> <ul> <li>\u26a0\ufe0f Run this only after ALL repositories are migrated</li> <li>\ud83d\udd0d Finds issues/PRs with cross-repo Bitbucket links</li> <li>\u270f\ufe0f Updates ONLY those links using <code>cross_repo_mappings.json</code></li> <li>\u2705 No new issues/PRs created</li> <li>\ud83d\udcca Reports show successfully updated cross-repo links</li> </ul>"},{"location":"migration_guide/#configuration-requirements","title":"Configuration Requirements","text":"<p>Each repository's <code>migration_config.json</code> must include repository mappings for cross-repo references:</p> <pre><code>{\n  \"bitbucket\": {\n    \"workspace\": \"WORKSPACE\",\n    \"repo\": \"repo-name\"\n  },\n  \"github\": {\n    \"owner\": \"GITHUB_USER\",\n    \"repo\": \"repo-name\"\n  },\n  \"repository_mapping\": {\n    \"WORKSPACE/other-repo1\": \"GITHUB_USER/other-repo1\",\n    \"WORKSPACE/other-repo2\": \"GITHUB_USER/other-repo2\"\n  },\n  \"user_mapping\": { ... }\n}\n</code></pre>"},{"location":"migration_guide/#cross-repository-mappings-file","title":"Cross-Repository Mappings File","text":"<p>The <code>cross_repo_mappings.json</code> file coordinates link rewriting across repositories:</p> <pre><code>{\n  \"workspace/repo-a\": {\n    \"issues\": { \"1\": 5, \"2\": 6, \"10\": 15 },\n    \"prs\": { \"1\": 7, \"3\": 8 }\n  },\n  \"workspace/repo-b\": {\n    \"issues\": { \"5\": 12, \"8\": 14 },\n    \"prs\": { \"2\": 9 }\n  }\n}\n</code></pre> <p>This file is automatically managed - you don't need to edit it manually.</p>"},{"location":"migration_guide/#important-notes","title":"Important Notes","text":"<ul> <li>Configuration: Each repository needs its own <code>migration_config.json</code> generated by the audit command</li> <li>Repository Mapping: Include mappings to all other repositories in your <code>repository_mapping</code> section</li> <li>Incremental Migration: You can run migrate/cross-link for repositories incrementally, but cross-link should only be used after all repos are migrated</li> <li>Token and User Mapping: Set up your API tokens and user mappings in each config file</li> </ul>"},{"location":"migration_guide/#support-resources","title":"Support Resources","text":"<ul> <li>GitHub REST API Documentation</li> <li>Bitbucket Cloud API Documentation</li> <li>GitHub Support</li> </ul>"},{"location":"migration_guide/#checklist-before-asking-for-help","title":"Checklist Before Asking for Help","text":"<ul> <li>Confirm both API tokens are active and scoped correctly</li> <li>Compare audit vs. migrated item counts</li> <li>Check <code>migration_mapping.json</code> for missing IDs</li> <li>Search console logs for <code>ERROR</code> or <code>429</code></li> <li>Verify no network or disk errors occurred</li> </ul> <p>If problems persist, open a support ticket with a description of the error and the script version.</p>"},{"location":"migration_guide/#references","title":"\ud83d\udcda References","text":"<ul> <li>Migration Config Reference</li> <li>Migration Details Reference</li> <li>CLI Reference</li> <li>User Mapping Guide</li> <li>API Token Setup</li> </ul>"},{"location":"migration_guide/#additional-subcommands","title":"\ud83d\udd27 Additional Subcommands","text":""},{"location":"migration_guide/#test-authentication-test-auth","title":"Test Authentication: <code>test-auth</code>","text":"<p>Test Bitbucket and GitHub API authentication before migration:</p> <pre><code>migrate_bitbucket_to_github test-auth --workspace WORKSPACE --repo REPO --email EMAIL --gh-owner OWNER --gh-repo REPO\n</code></pre>"},{"location":"migration_guide/#cross-link-processing-cross-link","title":"Cross-Link Processing: <code>cross-link</code>","text":"<p>Update cross-repository links after migration:</p> <pre><code>migrate_bitbucket_to_github cross-link --config migration_config.json\n</code></pre>"},{"location":"migration_guide/#clean-up-clean","title":"Clean Up: <code>clean</code>","text":"<p>Remove generated files with selective filtering:</p> <pre><code>migrate_bitbucket_to_github clean --subcommand audit migrate\n</code></pre>"},{"location":"reference/api_tokens/","title":"API Tokens Setup Guide","text":"<p>This comprehensive guide explains all authentication requirements for the Bitbucket to GitHub migration tools, including the audit script and migration script.</p>"},{"location":"reference/api_tokens/#authentication-overview","title":"\ud83d\udd11 Authentication Overview","text":"<p>The migration process requires multiple authentication methods depending on which tools you use:</p> Tool Bitbucket Token GitHub PAT Purpose <code>migrate_bitbucket_to_github test-auth</code> \u2705 Required \u2705 Required Test authentication <code>migrate_bitbucket_to_github audit</code> \u2705 Required \u274c Not needed Audit repository content <code>migrate_bitbucket_to_github migrate --dry-run</code> \u2705 Required \u2705 Required Dry-run migrate issues/PRs <code>migrate_bitbucket_to_github migrate</code> \u2705 Required \u2705 Required Migrate issues/PRs <code>migrate_bitbucket_to_github cross-link</code> \u2705 Required \u2705 Required Post-migration link updates <p>What you need:</p> <ul> <li>Migration: Bitbucket API Token + GitHub PAT</li> <li>Post-Migration: Bitbucket API Token + GitHub PAT (for cross-repository link updates)</li> </ul>"},{"location":"reference/api_tokens/#bitbucket-cloud-api-token","title":"\ud83d\udd11 Bitbucket Cloud API Token","text":"<p>Required for: <code>migrate_bitbucket_to_github audit</code>, <code>migrate_bitbucket_to_github migrate</code></p>"},{"location":"reference/api_tokens/#creating-your-token","title":"Creating Your Token","text":"<ol> <li>Go to Atlassian Account Settings \u2192 Security \u2192 Create and manage API tokens</li> <li>Click Create API token</li> <li>Name it: <code>Migration Tool</code></li> <li>Choose Bitbucket as the app</li> <li>Set Full access (or minimally: read repos, issues, PRs)</li> <li>Copy the token immediately \u2013 it won't be shown again</li> </ol>"},{"location":"reference/api_tokens/#required-permissions","title":"Required Permissions","text":"<pre><code>{\n  \"scopes\": [\n    \"repository:read\",\n    \"pullrequest:read\",\n    \"issue:read\",\n    \"account:read\"\n  ]\n}\n</code></pre> <p>Note: User-level API tokens (not Repository Access Tokens) are required for issue and PR access.</p>"},{"location":"reference/api_tokens/#usage-in-configuration","title":"Usage in Configuration","text":"<pre><code>\"bitbucket\": {\n  \"workspace\": \"your-workspace\",\n  \"email\": \"you@example.com\",\n  \"token\": \"SET_BITBUCKET_TOKEN_ENV_VAR\"\n}\n</code></pre> <p>Note: Tokens are no longer stored in config files. Set them via environment variables instead.</p>"},{"location":"reference/api_tokens/#github-authentication","title":"\ud83d\udd11 GitHub Authentication","text":"<p>Required for: <code>migrate_bitbucket_to_github dry-run</code> and <code>migrate_bitbucket_to_github migrate</code></p>"},{"location":"reference/api_tokens/#github-personal-access-token-pat","title":"GitHub Personal Access Token (PAT)","text":""},{"location":"reference/api_tokens/#creating-your-token_1","title":"Creating Your Token","text":"<ol> <li>Go to GitHub Settings \u2192 Developer settings \u2192 Personal access tokens (classic)</li> <li>Click Generate new token (classic)</li> <li>Name it <code>Bitbucket Migration</code></li> <li>Select scopes:<ul> <li><code>repo</code> (Full control of private repositories)</li> <li><code>user:email</code> (Read-only access to email addresses)</li> </ul> </li> <li>Click Generate token and copy it</li> </ol>"},{"location":"reference/api_tokens/#required-scopes-explained","title":"Required Scopes Explained","text":"Scope Purpose Why Needed <code>repo</code> Full repository access Create issues, PRs, comments, manage assignees <code>user:email</code> Read email addresses User mapping and author identification"},{"location":"reference/api_tokens/#usage-in-configuration_1","title":"Usage in Configuration","text":"<pre><code>\"github\": {\n  \"owner\": \"my-org\",\n  \"repo\": \"my-repo\",\n  \"token\": \"YOUR_GITHUB_TOKEN_HERE\"\n}\n</code></pre> <p>Note: Tokens are no longer stored in config files. Set them via environment variables instead.</p>"},{"location":"reference/api_tokens/#token-security-best-practices","title":"\ud83d\udd27 Token Security Best Practices","text":""},{"location":"reference/api_tokens/#environment-variables-recommended","title":"Environment Variables (Recommended)","text":"<pre><code># Create .env file\nBITBUCKET_TOKEN=ATAT1234...\nGITHUB_TOKEN=ghp_abcd123...\n\n# Or set in shell\nexport BITBUCKET_TOKEN=\"ATAT1234...\"\nexport GITHUB_TOKEN=\"ghp_abcd123...\"\n\n# Run scripts (tokens loaded automatically from env vars or .env)\nmigrate_bitbucket_to_github audit --workspace YOUR_WORKSPACE --repo YOUR_REPO --email you@example.com\n</code></pre>"},{"location":"reference/api_tokens/#security-guidelines","title":"Security Guidelines","text":"<ul> <li>Never commit tokens to Git repositories</li> <li>Use environment variables or .env files for token storage (recommended)</li> <li>Use read-only tokens where possible (audit script only needs read access)</li> <li>Rotate tokens regularly (especially after migration completion)</li> <li>Use separate tokens for different purposes (audit vs migration)</li> <li>Delete unused tokens once migration is verified</li> <li>Store securely in password managers or secure credential storage</li> <li>Secure or remove any token files like bitbucket_api_token.txt</li> </ul>"},{"location":"reference/api_tokens/#token-permissions-matrix","title":"Token Permissions Matrix","text":"Operation Bitbucket Token GitHub PAT Repository audit Read access Not needed Issue migration Read access Repo access PR migration Read access Repo access Attachment upload Read access Repo access Cross-repo link updates Read access Repo access"},{"location":"reference/api_tokens/#authentication-testing","title":"\u2705 Authentication Testing","text":""},{"location":"reference/api_tokens/#test-bitbucket-authentication","title":"Test Bitbucket Authentication","text":"<p>Use the provided test script to verify your Bitbucket token:</p> <pre><code>migrate_bitbucket_to_github test-auth --workspace YOUR_WORKSPACE --repo YOUR_REPO --email you@example.com --gh-owner YOUR_GITHUB_OWNER --gh-repo YOUR_GITHUB_REPO\n</code></pre> <p>Expected output: <pre><code>\u2705 All tests passed! Your API Token is working correctly.\n</code></pre></p> <p>If tests fail: The script provides detailed troubleshooting guidance and token creation instructions.</p>"},{"location":"reference/api_tokens/#test-github-authentication","title":"Test GitHub Authentication","text":"<p>Verify your GitHub PAT works correctly:</p> <pre><code># Test basic authentication\ncurl -H \"Authorization: token $GITHUB_TOKEN\" https://api.github.com/user\n\n# Test repository access\ncurl -H \"Authorization: token $GITHUB_TOKEN\" https://api.github.com/repos/YOUR_ORG/YOUR_REPO\n\n# Test issue creation (dry run)\ncurl -X POST -H \"Authorization: token $GITHUB_TOKEN\" \\\n  https://api.github.com/repos/YOUR_ORG/YOUR_REPO/issues \\\n  -d '{\"title\":\"Test Issue\",\"body\":\"Testing authentication\"}'\n</code></pre>"},{"location":"reference/api_tokens/#troubleshooting-authentication-issues","title":"\ud83d\udd0d Troubleshooting Authentication Issues","text":""},{"location":"reference/api_tokens/#bitbucket-token-problems","title":"Bitbucket Token Problems","text":"<p>\"401 Unauthorized\"</p> <ul> <li>Verify token is correct (copy-paste errors are common)</li> <li>Check if token has expired</li> <li>Ensure you're using a user-level API token (not Repository Access Token)</li> <li>Confirm token has issue and PR read permissions</li> </ul> <p>\"403 Forbidden\"</p> <ul> <li>Token may lack required permissions</li> <li>Repository may be private and token doesn't have access</li> <li>Workspace access may be restricted</li> </ul> <p>\"404 Not Found\"</p> <ul> <li>Verify workspace and repository names are correct</li> <li>Check if repository exists and is accessible</li> </ul>"},{"location":"reference/api_tokens/#github-token-problems","title":"GitHub Token Problems","text":"<p>\"401 Unauthorized\"</p> <ul> <li>Verify PAT is correct and not expired</li> <li>Check if PAT has <code>repo</code> scope enabled</li> <li>Ensure you're using a classic token (not fine-grained)</li> </ul> <p>\"403 Forbidden\"</p> <ul> <li>PAT may lack required scopes</li> <li>Repository may be private and PAT doesn't have access</li> <li>Organization may require PAT approval</li> </ul> <p>\"404 Not Found\"</p> <ul> <li>Verify repository exists and is accessible</li> <li>Check if organization/repository names are correct</li> </ul>"},{"location":"reference/api_tokens/#verification-workflow","title":"\ud83d\udca1 Verification Workflow","text":""},{"location":"reference/api_tokens/#before-running-audit-script","title":"Before Running Audit Script","text":"<ol> <li> <p>Set environment variables: <pre><code>export BITBUCKET_TOKEN=\"ATAT1234...\"\n</code></pre></p> </li> <li> <p>Test Bitbucket authentication: <pre><code>migrate_bitbucket_to_github test-auth --workspace YOUR_WORKSPACE --repo YOUR_REPO --email you@example.com\n</code></pre></p> </li> <li> <p>Verify repository access: <pre><code>curl -u you@example.com:$BITBUCKET_TOKEN https://api.bitbucket.org/2.0/repositories/YOUR_WORKSPACE/YOUR_REPO\n</code></pre></p> </li> <li> <p>Run audit script: <pre><code>migrate_bitbucket_to_github audit --workspace YOUR_WORKSPACE --repo YOUR_REPO --email you@example.com\n</code></pre></p> </li> </ol>"},{"location":"reference/api_tokens/#before-running-migration-script","title":"Before Running Migration Script","text":"<ol> <li> <p>Set environment variables: <pre><code>export BITBUCKET_TOKEN=\"ATAT123...\"\nexport GITHUB_TOKEN=\"ghp_123...\"\n</code></pre></p> </li> <li> <p>Test authentication: <pre><code>migrate_bitbucket_to_github test-auth --workspace YOUR_WORKSPACE --repo YOUR_REPO --email you@example.com --gh-owner YOUR_ORG --gh-repo YOUR_REPO\n</code></pre></p> </li> <li> <p>Run dry-run migration: <pre><code>migrate_bitbucket_to_github migrate --config config.json --dry-run\n</code></pre></p> </li> </ol>"},{"location":"reference/api_tokens/#after-authentication-issues","title":"After Authentication Issues","text":"<ol> <li>Check token scopes and permissions</li> <li>Verify repository access</li> <li>Test with minimal operations first</li> <li>Use dry-run modes to validate setup</li> <li>Check the troubleshooting guides above</li> </ol>"},{"location":"reference/api_tokens/#quick-start-commands","title":"\ud83d\ude80 Quick Start Commands","text":""},{"location":"reference/api_tokens/#basic-setup","title":"Basic Setup","text":"<pre><code># 1. Set environment variables\nexport BITBUCKET_TOKEN=\"ATAT123...\"\nexport GITHUB_TOKEN=\"ghp_456...\"\n\n# 2. Test authentication\nmigrate_bitbucket_to_github test-auth --workspace myteam --repo myrepo --email me@company.com --gh-owner myorg --gh-repo myrepo\n\n# 3. Run audit\nmigrate_bitbucket_to_github audit --workspace myteam --repo myrepo --email me@company.com --gh-owner myorg\n\n# 4. Run migration dry-run\nmigrate_bitbucket_to_github migrate --config config.json --dry-run\n\n# 5. Run full migration\nmigrate_bitbucket_to_github migrate --config config.json\n\n# 6. Update cross-repository links (post-migration)\nmigrate_bitbucket_to_github cross-link --config config.json\n</code></pre>"},{"location":"reference/api_tokens/#token-requirements-summary","title":"\ud83d\udccb Token Requirements Summary","text":"Feature Bitbucket Token GitHub PAT Repository audit \u2705 User-level, read access \u274c Issue migration \u2705 User-level, read access \u2705 <code>repo</code> scope PR migration \u2705 User-level, read access \u2705 <code>repo</code> scope Attachment upload \u2705 User-level, read access \u2705 <code>repo</code> scope Cross-repo link updates \u2705 User-level, read access \u2705 <code>repo</code> scope User mapping \u2705 User-level, read access \u2705 <code>repo</code>, <code>user:email</code> <p>Key Points:</p> <ul> <li>Always use user-level Bitbucket API tokens (not Repository Access Tokens)</li> <li>GitHub PAT requires <code>repo</code> scope for full functionality</li> <li>Test authentication before running migration scripts</li> <li>Use dry-run modes to validate your setup</li> <li>Attachments require manual upload due to GitHub API limitations</li> </ul>"},{"location":"reference/architecture/","title":"Architecture Reference","text":"<p>This document describes the architecture of the bitbucket_migration package, providing developers with an understanding of the main components, their responsibilities, and how they interact.</p>"},{"location":"reference/architecture/#introduction","title":"Introduction","text":"<p>The bitbucket_migration package uses a modular, orchestrator-based architecture to handle the migration process from Bitbucket to GitHub. The design emphasizes separation of concerns, with specialized components for API interactions, data processing, and migration logic. This allows for easy testing, maintenance, and extension.</p> <p>Key design principles:</p> <ul> <li>Modularity: Each component has a single responsibility.</li> <li>Orchestration: A central coordinator manages the workflow.</li> <li>Security: Secure handling of API tokens and configuration.</li> <li>Extensibility: Services and formatters can be easily added or modified.</li> </ul>"},{"location":"reference/architecture/#high-level-architecture","title":"High-Level Architecture","text":"<pre><code>graph TD\n     A[CLI Entry Point] --&gt; B[AuditOrchestrator]\n     A --&gt; C[MigrationOrchestrator]\n     A --&gt; N[CrossLinkOrchestrator]\n     B --&gt; D[BitbucketClient]\n     C --&gt; D\n     C --&gt; E[GitHubClient]\n     C --&gt; G[Services: UserMapper, LinkRewriter, AttachmentHandler]\n     C --&gt; H[Migrators: IssueMigrator, PullRequestMigrator, MilestoneMigrator]\n     C --&gt; I[Formatters: FormatterFactory]\n     C --&gt; J[ReportGenerator]\n     C --&gt; O[RepoMigrator]\n     N --&gt; P[CrossLinkUpdater]\n     O --&gt; Q[BaseMigrator]\n     G --&gt; R[Link Handlers: IssueLinkHandler, PrLinkHandler, etc.]\n     D --&gt; K[Bitbucket API]\n     E --&gt; L[GitHub API]\n     S[BaseDirManager] --&gt; T[FileRegistry]\n     U[MigrationContext] --&gt; V[ServiceLocator]</code></pre>"},{"location":"reference/architecture/#main-components","title":"Main Components","text":""},{"location":"reference/architecture/#core-orchestrators","title":"Core Orchestrators","text":"<ul> <li>MigrationOrchestrator (<code>src/bitbucket_migration/core/orchestrator.py</code>): Central coordinator for the migration process. Initializes components, fetches data, executes migrations, and generates reports.</li> <li>AuditOrchestrator (<code>src/bitbucket_migration/audit/audit_orchestrator.py</code>): Handles pre-migration analysis, generating audit reports and configuration templates.</li> <li>CrossLinkOrchestrator (<code>src/bitbucket_migration/core/orchestrator.py</code>): Manages cross-repository link updates after migration.</li> <li>BaseOrchestrator (<code>src/bitbucket_migration/core/orchestrator.py</code>): Base class providing common functionality for all orchestrators.</li> </ul>"},{"location":"reference/architecture/#api-clients","title":"API Clients","text":"<ul> <li>BitbucketClient (<code>src/bitbucket_migration/clients/bitbucket_client.py</code>): Interfaces with Bitbucket API for fetching issues, PRs, milestones, etc.</li> <li>GitHubClient (<code>src/bitbucket_migration/clients/github_client.py</code>): Interfaces with GitHub API for creating issues, PRs, comments, etc.</li> </ul>"},{"location":"reference/architecture/#services","title":"Services","text":"<ul> <li>UserMapper (<code>src/bitbucket_migration/services/user_mapper.py</code>): Maps Bitbucket users to GitHub accounts, resolving account IDs.</li> <li>LinkRewriter (<code>src/bitbucket_migration/services/link_rewriter.py</code>): Rewrites cross-references between issues and PRs to point to GitHub.</li> <li>AttachmentHandler (<code>src/bitbucket_migration/services/attachment_handler.py</code>): Downloads attachments from Bitbucket and creates informative comments for manual upload.</li> <li>CrossRepoMappingStore (<code>src/bitbucket_migration/services/cross_repo_mapping_store.py</code>): Manages mappings between repositories for cross-repository link rewriting.</li> <li>LinkDetector (<code>src/bitbucket_migration/services/link_detector.py</code>): Detects and extracts URLs from text content.</li> <li>BaseLinkHandler (<code>src/bitbucket_migration/services/base_link_handler.py</code>): Base class for link handling with priority-based processing.</li> <li>IssueLinkHandler (<code>src/bitbucket_migration/services/issue_link_handler.py</code>): Handles Bitbucket issue link rewriting.</li> <li>PrLinkHandler (<code>src/bitbucket_migration/services/pr_link_handler.py</code>): Handles Bitbucket PR link rewriting.</li> <li>BranchLinkHandler (<code>src/bitbucket_migration/services/branch_link_handler.py</code>): Handles Bitbucket branch link rewriting.</li> <li>CommitLinkHandler (<code>src/bitbucket_migration/services/commit_link_handler.py</code>): Handles Bitbucket commit link rewriting.</li> <li>CompareLinkHandler (<code>src/bitbucket_migration/services/compare_link_handler.py</code>): Handles Bitbucket compare link rewriting.</li> <li>CrossRepoLinkHandler (<code>src/bitbucket_migration/services/cross_repo_link_handler.py</code>): Handles cross-repository link rewriting.</li> <li>RepoHomeLinkHandler (<code>src/bitbucket_migration/services/repo_home_link_handler.py</code>): Handles repository home page link rewriting.</li> <li>ShortIssueRefHandler (<code>src/bitbucket_migration/services/short_issue_ref_handler.py</code>): Handles short issue reference rewriting.</li> </ul>"},{"location":"reference/architecture/#migrators","title":"Migrators","text":"<ul> <li>IssueMigrator (<code>src/bitbucket_migration/migration/issue_migrator.py</code>): Handles migration of issues, including comments and attachments.</li> <li>PullRequestMigrator (<code>src/bitbucket_migration/migration/pr_migrator.py</code>): Migrates PRs, deciding whether to create GitHub PRs or issues based on branch existence and status.</li> <li>MilestoneMigrator (<code>src/bitbucket_migration/migration/milestone_migrator.py</code>): Manages migration of milestones from Bitbucket to GitHub.</li> <li>RepoMigrator (<code>src/bitbucket_migration/core/repo_migrator.py</code>): Orchestrates migration for individual repositories, coordinating all migrators.</li> <li>BaseMigrator (<code>src/bitbucket_migration/core/repo_migrator.py</code>): Base class providing common migration functionality.</li> <li>CrossLinkMigrator (<code>src/bitbucket_migration/core/repo_migrator.py</code>): Handles cross-repository link updates.</li> </ul>"},{"location":"reference/architecture/#formatters-and-reports","title":"Formatters and Reports","text":"<ul> <li>FormatterFactory (<code>src/bitbucket_migration/formatters/formatter_factory.py</code>): Creates formatters for content (e.g., Markdown, HTML).</li> <li>ReportGenerator (<code>src/bitbucket_migration/migration/report_generator.py</code>): Generates migration reports and mappings.</li> <li>ContentFormatter (<code>src/bitbucket_migration/formatters/content_formatter.py</code>): Base class for content formatting.</li> <li>IssueContentFormatter (<code>src/bitbucket_migration/formatters/content_formatter.py</code>): Formats issue content for GitHub.</li> <li>PullRequestContentFormatter (<code>src/bitbucket_migration/formatters/content_formatter.py</code>): Formats PR content for GitHub.</li> <li>CommentContentFormatter (<code>src/bitbucket_migration/formatters/content_formatter.py</code>): Formats comment content for GitHub.</li> </ul>"},{"location":"reference/architecture/#audit-components","title":"Audit Components","text":"<ul> <li>Auditor (<code>src/bitbucket_migration/audit/auditor.py</code>): Performs detailed audit of repositories for migration planning.</li> <li>AuditUtils (<code>src/bitbucket_migration/audit/audit_utils.py</code>): Utility functions for audit analysis and reporting.</li> </ul>"},{"location":"reference/architecture/#commands","title":"Commands","text":"<ul> <li>MigrationCommand (<code>src/bitbucket_migration/commands/migration_command.py</code>): Handles migration command execution.</li> <li>AuditCommand (<code>src/bitbucket_migration/commands/audit_command.py</code>): Handles audit command execution.</li> <li>CleanCommand (<code>src/bitbucket_migration/commands/clean_command.py</code>): Handles cleanup command execution.</li> <li>CrossLinkCommand (<code>src/bitbucket_migration/commands/cross_link_command.py</code>): Handles cross-link update command execution.</li> <li>TestAuthCommand (<code>src/bitbucket_migration/commands/test_auth_command.py</code>): Handles authentication testing command execution.</li> </ul>"},{"location":"reference/architecture/#configuration-and-utilities","title":"Configuration and Utilities","text":"<ul> <li>MigrationConfig (<code>src/bitbucket_migration/config/migration_config.py</code>): Data structures for configuration.</li> <li>SecureConfigLoader (<code>src/bitbucket_migration/config/secure_config.py</code>): Loads configuration securely, supporting environment variables.</li> <li>ConfigLoader (<code>src/bitbucket_migration/config/migration_config.py</code>): Handles loading and validation of configuration files.</li> <li>ConfigValidator (<code>src/bitbucket_migration/config/migration_config.py</code>): Validates configuration data.</li> <li>LinkRewritingConfig (<code>src/bitbucket_migration/config/migration_config.py</code>): Configuration for link rewriting templates.</li> <li>MigrationContext (<code>src/bitbucket_migration/core/migration_context.py</code>): Provides context and service locator for migration operations.</li> <li>ServiceLocator (<code>src/bitbucket_migration/core/migration_context.py</code>): Registry for services with attribute-like access.</li> <li>MigrationEnvironment (<code>src/bitbucket_migration/core/migration_context.py</code>): Environment configuration and state.</li> <li>MigrationMappings (<code>src/bitbucket_migration/core/migration_context.py</code>): Tracks mappings between Bitbucket and GitHub entities.</li> <li>MigrationState (<code>src/bitbucket_migration/core/migration_context.py</code>): Current state of the migration process.</li> <li>BaseDirManager (<code>src/bitbucket_migration/utils/base_dir_manager.py</code>): Manages base directory structure and file operations.</li> <li>FileRegistry (<code>src/bitbucket_migration/utils/file_registry.py</code>): Tracks and manages migration-related files with locking.</li> <li>MigrationLogger (<code>src/bitbucket_migration/utils/logging_config.py</code>): Custom logging configuration for migration operations.</li> <li>Logging and Exceptions: Custom logging (<code>utils/logging_config.py</code>) and exceptions (<code>exceptions.py</code>) for error handling.</li> </ul>"},{"location":"reference/architecture/#interactions-and-data-flow","title":"Interactions and Data Flow","text":"<ol> <li>CLI Invocation: User runs commands like <code>migrate</code>, <code>audit</code>, <code>cross-link</code>, or <code>clean</code> via the main script.</li> <li>Orchestrator Setup: Appropriate orchestrator (MigrationOrchestrator, AuditOrchestrator, CrossLinkOrchestrator) initializes components based on config.</li> <li>Configuration Loading: SecureConfigLoader loads and validates configuration, supporting environment variables.</li> <li>Repository Setup: BaseDirManager and FileRegistry manage directory structure and file tracking.</li> <li>Data Fetching: BitbucketClient fetches issues, PRs, milestones, comments, and attachments from Bitbucket API.</li> <li>User Mapping: UserMapper builds account ID mappings from fetched data.</li> <li>Milestone Migration: MilestoneMigrator creates corresponding milestones on GitHub.</li> <li>Content Processing: Formatters convert Bitbucket content to GitHub-compatible format.</li> <li>Link Rewriting: LinkRewriter processes content using various LinkHandlers to update references.</li> <li>Migration Execution: RepoMigrator coordinates IssueMigrator and PullRequestMigrator to create content on GitHub.</li> <li>Cross-Repository Linking: CrossRepoMappingStore and CrossRepoLinkHandler manage links between repositories.</li> <li>Attachment Handling: AttachmentHandler downloads from Bitbucket and creates informative comments for manual upload.</li> <li>Reporting: ReportGenerator produces summaries, mappings, and audit reports.</li> <li>Post-Migration Updates: CrossLinkUpdater can update links after all migrations are complete.</li> </ol> <p>The orchestrator ensures sequential execution, with error handling and partial saves on interruption.</p>"},{"location":"reference/cli_reference/","title":"CLI Reference Guide","text":"<p>This comprehensive guide covers the command-line interface for the unified migration tool <code>migrate_bitbucket_to_github</code>, which includes subcommands for authentication testing, repository auditing, and data migration. All functionality is integrated into a single script with subcommands for a streamlined workflow.</p>"},{"location":"reference/cli_reference/#subcommand-overview","title":"\ud83d\udccb Subcommand Overview","text":"Subcommand Purpose When to Use test-auth Authentication testing Before audit to verify API access audit Repository analysis Before migration to understand scope migrate Data migration After audit and preparation cross-link Post-migration link processing After migration to update cross-repository links clean Remove output files After migration to clean up generated files"},{"location":"reference/cli_reference/#authentication-testing-test-auth-subcommand","title":"\ud83d\udd10 Authentication Testing: <code>test-auth</code> Subcommand","text":"<p>Tests Bitbucket and GitHub API authentication and permissions before running the audit.</p>"},{"location":"reference/cli_reference/#basic-syntax","title":"Basic Syntax","text":"<pre><code>migrate_bitbucket_to_github test-auth --workspace WORKSPACE --repo REPO --email EMAIL [OPTIONS]\n</code></pre>"},{"location":"reference/cli_reference/#arguments","title":"Arguments","text":"<p>Note: missing arguments will be prompted if not provided. | Argument | Description | Example | |----------|-------------|---------| | <code>--workspace</code> | Bitbucket workspace name | <code>myteam</code> | | <code>--repo</code> | Repository name | <code>myproject</code> | | <code>--email</code> | Atlassian account email | <code>user@example.com</code> | | <code>--token</code> | Bitbucket API token | <code>ATAT123...</code> | | <code>--gh-owner</code> | GitHub owner | <code>myusername</code> | | <code>--gh-repo</code> | GitHub repository name | <code>myproject</code> | | <code>--gh-token</code> | GitHub API token | <code>ghp_...</code> |</p>"},{"location":"reference/cli_reference/#examples","title":"Examples","text":""},{"location":"reference/cli_reference/#simple-authentication-test","title":"Simple Authentication Test","text":"<pre><code># Tokens will be prompted interactively\nmigrate_bitbucket_to_github test-auth --workspace myteam --repo myproject --email user@example.com --gh-owner myusername --gh-repo myproject\n</code></pre>"},{"location":"reference/cli_reference/#authentication-test-with-tokens","title":"Authentication Test with Tokens","text":"<pre><code>migrate_bitbucket_to_github test-auth --workspace myteam --repo myproject \\\n  --email user@example.com \\\n  --token ATAT1234567890abcdef \\\n  --gh-owner myusername \\\n  --gh-repo myproject \\\n  --gh-token ghp_1234567890abcdef\n</code></pre>"},{"location":"reference/cli_reference/#batch-testing-multiple-repositories","title":"Batch Testing Multiple Repositories","text":"<pre><code># Test multiple repos in the same workspace\nfor repo in repo1 repo2 repo3; do\n  migrate_bitbucket_to_github test-auth --workspace myteam --repo $repo --email user@example.com --token $TOKEN --gh-owner myusername --gh-repo $repo --gh-token $GH_TOKEN\ndone\n</code></pre>"},{"location":"reference/cli_reference/#what-it-tests","title":"What It Tests","text":"<ul> <li>\u2705 Repository access and metadata</li> <li>\u2705 Issues API permissions</li> <li>\u2705 Pull requests API access</li> <li>\u2705 Authentication credentials validity</li> </ul>"},{"location":"reference/cli_reference/#expected-output","title":"Expected Output","text":"<pre><code>Testing Bitbucket API Authentication\n============================================================\nWorkspace: myteam\nRepository: myproject\nEmail: user@example.com\nUsing user-level API Token authentication\n============================================================\n\nTest 1/3: Repository Info\n  Verify repository access\n  URL: https://api.bitbucket.org/2.0/repositories/myteam/myproject\n  \u2705 SUCCESS (200 OK)\n     Repository: myproject\n\nTest 2/3: Issues List\n  Verify issues API access\n  URL: https://api.bitbucket.org/2.0/repositories/myteam/myproject/issues\n  \u2705 SUCCESS (200 OK)\n     Found 42 items\n\nTest 3/3: Pull Requests List\n  Verify pull requests API access\n  URL: https://api.bitbucket.org/2.0/repositories/myteam/myproject/pullrequests\n  \u2705 SUCCESS (200 OK)\n     Found 18 items\n\n============================================================\n\u2705 All tests passed! Your API Token is working correctly.\nYou can now run the full audit script.\n============================================================\n</code></pre>"},{"location":"reference/cli_reference/#repository-audit-audit-subcommand","title":"\ud83d\udd0d Repository Audit: <code>audit</code> Subcommand","text":"<p>Performs comprehensive analysis of Bitbucket repository content for migration planning.</p>"},{"location":"reference/cli_reference/#basic-syntax_1","title":"Basic Syntax","text":"<pre><code>migrate_bitbucket_to_github audit --workspace WORKSPACE --repo REPO --email EMAIL [OPTIONS]\n</code></pre>"},{"location":"reference/cli_reference/#required-arguments","title":"Required Arguments","text":"Argument Description Example <code>--workspace</code> Bitbucket workspace name <code>myteam</code> <code>--repo</code> Repository name <code>myproject</code> <code>--email</code> Atlassian account email <code>user@example.com</code> <code>--token</code> API token (prompts if not provided) <code>ATAT123...</code>"},{"location":"reference/cli_reference/#optional-arguments","title":"Optional Arguments","text":"Argument Description Example <code>--no-config</code> Do not generate migration configuration template (default is to generate) <code>--gh-owner</code> GitHub username/org for config template <code>myusername</code> <code>--gh-repo</code> GitHub repository name for config template <code>myproject</code> <code>--base-dir</code> Base directory for migration workspace (v2.0 format only) <code>./migration_workspace</code> <code>--debug</code> Enable debug logging <p>New in v2.0: - <code>--base-dir</code>: Specifies base directory for unified configuration format - Audit outputs organized in standardized subdirectories under base directory</p> <p>Note: Missing required arguments will be prompted for interactively.</p>"},{"location":"reference/cli_reference/#examples_1","title":"Examples","text":""},{"location":"reference/cli_reference/#basic-repository-audit","title":"Basic Repository Audit","text":"<pre><code># Token will be prompted interactively\nmigrate_bitbucket_to_github audit --workspace myteam --repo myproject --email user@example.com\n</code></pre>"},{"location":"reference/cli_reference/#audit-with-token-provided","title":"Audit with Token Provided","text":"<pre><code>migrate_bitbucket_to_github audit --workspace myteam --repo myproject \\\n  --email user@example.com \\\n  --token ATAT1234567890abcdef\n</code></pre>"},{"location":"reference/cli_reference/#generate-migration-configuration","title":"Generate Migration Configuration","text":"<pre><code>migrate_bitbucket_to_github audit --workspace myteam --repo myproject \\\n  --email user@example.com \\\n  --gh-owner mygithubusername \\\n  --gh-repo myproject\n</code></pre>"},{"location":"reference/cli_reference/#automated-audit-pipeline","title":"Automated Audit Pipeline","text":"<pre><code>#!/bin/bash\n# audit_and_config.sh - Automated audit for multiple repositories\n\nWORKSPACE=\"myteam\"\nEMAIL=\"user@example.com\"\nTOKEN=\"ATAT123...\"\n\nfor repo in $(cat repos_to_migrate.txt); do\n  echo \"Auditing $repo...\"\n  migrate_bitbucket_to_github audit \\\n    --workspace $WORKSPACE \\\n    --repo $repo \\\n    --email $EMAIL \\\n    --token $TOKEN \\\n    --gh-owner mygithubusername \\\n    --gh-repo $repo\n\n  echo \"Audit complete for $repo\"\n  echo \"Configuration saved to migration_config.json\"\n  echo \"Edit user mappings before running migration\"\n  echo \"---\"\ndone\n</code></pre>"},{"location":"reference/cli_reference/#generated-files","title":"Generated Files","text":""},{"location":"reference/cli_reference/#bitbucket_audit_reportjson","title":"<code>bitbucket_audit_report.json</code>","text":"<p>Complete audit data in JSON format containing:</p> <ul> <li>Issue and PR counts, states, and gaps</li> <li>User activity analysis</li> <li>Attachment inventory with sizes</li> <li>Milestone and label usage</li> <li>Migration time estimates</li> </ul>"},{"location":"reference/cli_reference/#audit_reportmd","title":"<code>audit_report.md</code>","text":"<p>Human-readable markdown report with:</p> <ul> <li>Executive summary</li> <li>Detailed issue/PR analysis</li> <li>User activity breakdown</li> <li>Migration estimates</li> <li>Next steps and recommendations</li> </ul>"},{"location":"reference/cli_reference/#migration_configjson","title":"<code>migration_config.json</code>","text":"<p>Migration configuration template with:</p> <ul> <li>Pre-filled Bitbucket credentials</li> <li>User mapping template</li> <li>GitHub repository settings</li> </ul>"},{"location":"reference/cli_reference/#user_mapping_templatetxt","title":"<code>user_mapping_template.txt</code>","text":"<p>User mapping reference showing:</p> <ul> <li>All users found in repository</li> <li>Activity counts for each user</li> <li>Multiple mapping format examples</li> </ul>"},{"location":"reference/cli_reference/#audit-output-example","title":"Audit Output Example","text":"<pre><code>================================================================================\nBITBUCKET MIGRATION AUDIT REPORT\nRepository: myteam/myproject\nAudit Date: 2024-01-15T10:30:45\n================================================================================\n\n\ud83d\udccb ISSUES\n  Total Issues: 156\n  States: {'open': 23, 'closed': 133}\n  Number Range: #1 - #200\n  Number Gaps: 44 missing issue numbers\n  Total Comments: 892\n  Issues with Attachments: 12\n\n\ud83d\udd00 PULL REQUESTS\n  Total PRs: 89\n  States: {'OPEN': 5, 'MERGED': 78, 'DECLINED': 6}\n  Number Range: #1 - #95\n  Number Gaps: 6 missing PR numbers\n  Total Comments: 445\n\n\ud83d\udcce ATTACHMENTS\n  Total Files: 28\n  Total Size: 45.2 MB\n\n\ud83d\udc65 USERS\n  Unique Users: 34\n\n\ud83c\udff7\ufe0f  MILESTONES\n  Total: 8\n\n\ud83d\udcca MIGRATION ESTIMATES\n  Placeholder Issues Needed: 44\n  Estimated API Calls: ~850\n  Estimated Time: ~14 minutes\n\n================================================================================\nReport saved to: bitbucket_audit_report.json\n================================================================================\n</code></pre>"},{"location":"reference/cli_reference/#dry-run-mode","title":"\ud83d\udd04 Dry Run Mode","text":"<p>Dry-run mode is available on both <code>migrate</code> and <code>cross-link</code> subcommands to simulate operations without making changes to GitHub. This is the recommended first step after audit to validate your configuration and setup.</p>"},{"location":"reference/cli_reference/#using-dry-run-with-migrate","title":"Using Dry Run with Migrate","text":""},{"location":"reference/cli_reference/#basic-syntax_2","title":"Basic Syntax","text":"<pre><code>migrate_bitbucket_to_github migrate --config CONFIG_FILE --dry-run [OPTIONS]\n</code></pre>"},{"location":"reference/cli_reference/#required-arguments_1","title":"Required Arguments","text":"Argument Description Example <code>--config</code> Path to configuration JSON file <code>migration_config.json</code> <code>--dry-run</code> Enable dry-run mode (no changes made to GitHub)"},{"location":"reference/cli_reference/#optional-arguments_1","title":"Optional Arguments","text":"<p>Note: Missing required arguments will be prompted for interactively.</p> Argument Description Example <code>--skip-issues</code> Skip issue migration phase <code>--open-issues-only</code> Only migrate open issues <code>--skip-prs</code> Skip pull request migration phase <code>--open-prs-only</code> Only migrate open PRs <code>--skip-pr-as-issue</code> Skip migrating closed PRs as issues <code>--skip-milestones</code> Skip milestone migration phase <code>--open-milestones-only</code> Only migrate open milestones <code>--repo</code> / <code>--repos</code> Migrate specific repository(es) (unified config only) <code>--repo frontend</code> <code>--all</code> Explicitly migrate all repositories (default for unified config)"},{"location":"reference/cli_reference/#examples_2","title":"Examples","text":""},{"location":"reference/cli_reference/#basic-dry-run-recommended-first-step","title":"Basic Dry Run (Recommended First Step)","text":"<pre><code>migrate_bitbucket_to_github migrate --config migration_config.json --dry-run\n</code></pre>"},{"location":"reference/cli_reference/#dry-run-with-selective-options","title":"Dry Run with Selective Options","text":"<pre><code>migrate_bitbucket_to_github migrate --config migration_config.json --dry-run \\\n  --skip-pr-as-issue\n</code></pre>"},{"location":"reference/cli_reference/#dry-run-for-issues-only","title":"Dry Run for Issues Only","text":"<pre><code>migrate_bitbucket_to_github migrate --config migration_config.json --dry-run --skip-prs\n</code></pre>"},{"location":"reference/cli_reference/#dry-run-for-specific-repository-unified-config","title":"Dry Run for Specific Repository (Unified Config)","text":"<pre><code>migrate_bitbucket_to_github migrate --config migration_config.json --dry-run --repo frontend\n</code></pre>"},{"location":"reference/cli_reference/#what-it-does","title":"What It Does","text":"<ul> <li>\u2705 Fetches all issues and PRs from Bitbucket (read-only)</li> <li>\u2705 Checks if branches exist on GitHub</li> <li>\u2705 Downloads attachments to local folder</li> <li>\u2705 Validates user mappings</li> <li>\u2705 Shows exactly which PRs become GitHub PRs vs Issues</li> <li>\u2705 Generates simulated GitHub issue/PR numbers</li> <li>\u2705 Creates comprehensive dry-run report</li> </ul>"},{"location":"reference/cli_reference/#what-it-doesnt-do","title":"What It Doesn't Do","text":"<ul> <li>\u2717 No issues created on GitHub</li> <li>\u2717 No PRs created on GitHub</li> <li>\u2717 No comments added to GitHub</li> <li>\u2717 No labels applied</li> </ul>"},{"location":"reference/cli_reference/#generated-files_1","title":"Generated Files","text":""},{"location":"reference/cli_reference/#migration_dry_run_logtxt","title":"<code>migration_dry_run_log.txt</code>","text":"<p>Log file containing detailed execution information and any warnings.</p>"},{"location":"reference/cli_reference/#migration_report_dry_runmd","title":"<code>migration_report_dry_run.md</code>","text":"<p>Comprehensive markdown report with: - Simulated migration statistics - Detailed issue/PR migration tables - User mapping validation results - Attachment handling summary - Link rewriting analysis - Troubleshooting recommendations</p>"},{"location":"reference/cli_reference/#migration_mapping_partialjson","title":"<code>migration_mapping_partial.json</code>","text":"<p>Partial mapping file showing simulated Bitbucket \u2192 GitHub number mappings.</p>"},{"location":"reference/cli_reference/#attachments_temp","title":"<code>attachments_temp/</code>","text":"<p>Directory containing downloaded attachments for review (no uploads occur).</p>"},{"location":"reference/cli_reference/#dry-run-output-example","title":"Dry Run Output Example","text":"<pre><code>\ud83d\udd0d DRY RUN MODE ENABLED\nThis is a simulation - NO changes will be made to GitHub\n\nWhat WILL happen (read-only):\n  \u2713 Fetch all issues and PRs from Bitbucket\n  \u2713 Check if branches exist on GitHub\n  \u2713 Download attachments to local folder\n  \u2713 Validate user mappings\n  \u2713 Show exactly which PRs become GitHub PRs vs Issues\n\nWhat WON'T happen (no writes):\n  \u2717 No issues created on GitHub\n  \u2717 No PRs created on GitHub\n  \u2717 No comments added to GitHub\n  \u2717 No labels applied\n\nUse this to verify:\n  \u2022 Bitbucket connection works\n  \u2022 GitHub connection works (read-only check)\n  \u2022 User mappings are correct\n  \u2022 Branch existence (actual check)\n  \u2022 PR migration strategy (which become PRs vs issues)\n  \u2022 Exact GitHub issue/PR numbers that will be created\n\nAfter successful dry-run, use migrate subcommand (without --dry-run) to perform actual migration\n</code></pre>"},{"location":"reference/cli_reference/#cross-link-processing-cross-link-subcommand","title":"\ufffd\ufffd Cross-Link Processing: <code>cross-link</code> Subcommand","text":"<p>Updates cross-repository links after migration for unified multi-repository configurations.</p>"},{"location":"reference/cli_reference/#basic-syntax_3","title":"Basic Syntax","text":"<pre><code>migrate_bitbucket_to_github cross-link --config CONFIG_FILE [OPTIONS]\n</code></pre>"},{"location":"reference/cli_reference/#required-arguments_2","title":"Required Arguments","text":"Argument Description Example <code>--config</code> Path to configuration JSON file <code>migration_config.json</code>"},{"location":"reference/cli_reference/#optional-arguments_2","title":"Optional Arguments","text":"<p>Note: Missing required arguments will be prompted for interactively.</p> Argument Description Example <code>--repo</code> / <code>--repos</code> Process specific repository(es) (unified config only) <code>--repo frontend</code> <code>--all</code> Explicitly process all repositories (default for unified config) <code>--dry-run</code> Enable dry-run mode (no changes made to GitHub) <code>--debug</code> Enable debug logging"},{"location":"reference/cli_reference/#examples_3","title":"Examples","text":""},{"location":"reference/cli_reference/#basic-cross-link-processing","title":"Basic Cross-Link Processing","text":"<pre><code>migrate_bitbucket_to_github cross-link --config migration_config.json\n</code></pre>"},{"location":"reference/cli_reference/#dry-run-cross-link-processing","title":"Dry Run Cross-Link Processing","text":"<pre><code>migrate_bitbucket_to_github cross-link --config migration_config.json --dry-run\n</code></pre>"},{"location":"reference/cli_reference/#cross-link-specific-repository","title":"Cross-Link Specific Repository","text":"<pre><code>migrate_bitbucket_to_github cross-link --config migration_config.json --repo frontend\n</code></pre>"},{"location":"reference/cli_reference/#what-it-does_1","title":"What It Does","text":"<ul> <li>\u2705 Updates cross-repository issue/PR references in migrated content</li> <li>\u2705 Rewrites Bitbucket links to point to corresponding GitHub issues/PRs</li> <li>\u2705 Processes comments, issue descriptions, and PR descriptions</li> <li>\u2705 Generates comprehensive cross-link processing report</li> </ul>"},{"location":"reference/cli_reference/#what-it-doesnt-do_1","title":"What It Doesn't Do","text":"<ul> <li>\u2717 No new issues or PRs created</li> <li>\u2717 No attachments uploaded</li> <li>\u2717 No user mappings changed</li> </ul>"},{"location":"reference/cli_reference/#generated-files_2","title":"Generated Files","text":""},{"location":"reference/cli_reference/#cross_link_reportmd","title":"<code>cross_link_report.md</code>","text":"<p>Comprehensive markdown report with: - Cross-link processing statistics - Updated link mappings - Unhandled links and unmapped references - Troubleshooting recommendations</p>"},{"location":"reference/cli_reference/#data-migration-migrate-subcommand","title":"Data Migration: <code>migrate</code> Subcommand","text":"<p>Migrates repository data from Bitbucket to GitHub with intelligent handling of different content types.</p>"},{"location":"reference/cli_reference/#basic-syntax_4","title":"Basic Syntax","text":"<pre><code>migrate_bitbucket_to_github migrate --config CONFIG_FILE [OPTIONS]\n</code></pre>"},{"location":"reference/cli_reference/#required-arguments_3","title":"Required Arguments","text":"Argument Description Example <code>--config</code> Path to configuration JSON file <code>migration_config.json</code>"},{"location":"reference/cli_reference/#optional-arguments_3","title":"Optional Arguments","text":"<p>Note: Missing required arguments will be prompted for interactively.</p> Argument Description Example <code>--skip-issues</code> Skip issue migration phase <code>--open-issues-only</code> Only migrate open issues <code>--skip-prs</code> Skip pull request migration phase <code>--open-prs-only</code> Only migrate open PRs <code>--skip-pr-as-issue</code> Skip migrating closed PRs as issues <code>--skip-milestones</code> Skip milestone migration phase <code>--open-milestones-only</code> Only migrate open milestones <code>--repo</code> / <code>--repos</code> Migrate specific repository(es) (unified config only) <code>--repo frontend</code> <code>--all</code> Explicitly migrate all repositories (default for unified config) <code>--debug</code> Enable debug logging <p>New in v2.0: - <code>--repo</code> and <code>--repos</code>: Repository selection for unified configuration migrations - <code>--all</code>: Explicit flag for migrating all repositories in unified config - Directory management handled automatically via base directory in config - Additional filtering options for issues, PRs, and milestones</p>"},{"location":"reference/cli_reference/#examples_4","title":"Examples","text":""},{"location":"reference/cli_reference/#full-migration-basic","title":"Full Migration (Basic)","text":"<pre><code>migrate_bitbucket_to_github migrate --config migration_config.json\n</code></pre>"},{"location":"reference/cli_reference/#issues-only-migration","title":"Issues Only Migration","text":"<pre><code>migrate_bitbucket_to_github migrate --config migration_config.json --skip-prs\n</code></pre>"},{"location":"reference/cli_reference/#pull-requests-only-migration","title":"Pull Requests Only Migration","text":"<pre><code>migrate_bitbucket_to_github migrate --config migration_config.json --skip-issues\n</code></pre>"},{"location":"reference/cli_reference/#advanced-migration-with-selective-options","title":"Advanced Migration with Selective Options","text":"<pre><code>migrate_bitbucket_to_github migrate --config migration_config.json \\\n  --skip-pr-as-issue\n</code></pre>"},{"location":"reference/cli_reference/#migrate-specific-repository-unified-config","title":"Migrate Specific Repository (Unified Config)","text":"<pre><code>migrate_bitbucket_to_github migrate --config migration_config.json --repo frontend\n</code></pre>"},{"location":"reference/cli_reference/#batch-migration-script","title":"Batch Migration Script","text":"<pre><code>#!/bin/bash\n# migrate_multiple.sh - Migrate multiple repositories\n\nCONFIG_DIR=\"./configs\"\nATTACHMENTS_DIR=\"./attachments_temp\"\n\nfor config in $CONFIG_DIR/*.json; do\n  repo_name=$(basename \"$config\" .json)\n  echo \"Migrating $repo_name...\"\n\n  # Create separate attachments directory for each repo\n  mkdir -p \"$ATTACHMENTS_DIR/$repo_name\"\n\n  # Run migration\n  migrate_bitbucket_to_github \\\n    --config \"$config\"\n\n  echo \"Migration complete for $repo_name\"\n  echo \"Attachments: $ATTACHMENTS_DIR/$repo_name/\"\n  echo \"---\"\ndone\n</code></pre>"},{"location":"reference/cli_reference/#migration-strategy","title":"Migration Strategy","text":""},{"location":"reference/cli_reference/#issues-migration","title":"Issues Migration","text":"<ul> <li>All Bitbucket issues become GitHub issues</li> <li>Original numbering preserved with placeholders for gaps</li> <li>Comments and attachments migrated</li> <li>Assignees and labels preserved where possible</li> </ul>"},{"location":"reference/cli_reference/#pull-requests-migration","title":"Pull Requests Migration","text":"<ul> <li>OPEN PRs with existing branches \u2192 GitHub PRs (if branches exist on GitHub)</li> <li>OPEN PRs with missing branches \u2192 GitHub Issues</li> <li>MERGED/DECLINED/SUPERSEDED PRs \u2192 GitHub Issues (safest approach)</li> </ul>"},{"location":"reference/cli_reference/#link-rewriting","title":"Link Rewriting","text":"<ul> <li>Cross-references between issues/PRs automatically updated</li> <li>GitHub links become primary, Bitbucket references preserved</li> <li>Format: <code>[#123](github_url) *(was [BB #123](bitbucket_url))*</code></li> </ul>"},{"location":"reference/cli_reference/#generated-files_3","title":"Generated Files","text":""},{"location":"reference/cli_reference/#migration_mappingjson","title":"<code>migration_mapping.json</code>","text":"<p>Machine-readable mapping of Bitbucket \u2192 GitHub numbers: <pre><code>{\n  \"bitbucket\": {\n    \"workspace\": \"myteam\",\n    \"repo\": \"myproject\"\n  },\n  \"github\": {\n    \"owner\": \"myusername\",\n    \"repo\": \"myproject\"\n  },\n  \"issue_mapping\": {\n    \"1\": 5,\n    \"2\": 6,\n    \"3\": 8\n  },\n  \"pr_mapping\": {\n    \"1\": 7,\n    \"2\": 9\n  }\n}\n</code></pre></p>"},{"location":"reference/cli_reference/#migration_reportmd","title":"<code>migration_report.md</code>","text":"<p>Comprehensive markdown report with:</p> <ul> <li>Migration statistics and timing</li> <li>Detailed issue/PR migration tables</li> <li>User mapping summary</li> <li>Unhandled links and unmapped mentions</li> <li>Troubleshooting notes</li> </ul>"},{"location":"reference/cli_reference/#attachments_temp_1","title":"<code>attachments_temp/</code>","text":"<p>Directory containing downloaded attachments for manual upload.</p>"},{"location":"reference/cli_reference/#cleanup-clean-subcommand","title":"\ud83e\uddf9 Cleanup: <code>clean</code> Subcommand","text":"<p>Removes output files generated by audit, dry-run, and migrate subcommands. Useful for cleaning up after migration or starting fresh.</p>"},{"location":"reference/cli_reference/#basic-syntax_5","title":"Basic Syntax","text":"<pre><code>migrate_bitbucket_to_github clean [OPTIONS]\n</code></pre>"},{"location":"reference/cli_reference/#optional-arguments_4","title":"Optional Arguments","text":"Argument Description Example <code>--config</code> Path to migration config file to determine base directory <code>migration_config.json</code> <code>--base-dir</code> Base directory to clean (default: current directory) <code>./migration_workspace</code> <code>--subcommand</code> Clean output of select commands (audit, migrate, cross-link) <code>--subcommand audit migrate</code> <code>--reset</code> Clean everything including config, cross-repo mappings, and file registry <code>--workspace</code> Filter by workspace name(s) (requires file tracking) <code>--workspace myworkspace</code> <code>--repo</code> / <code>--repos</code> Filter by repository name(s) (requires file tracking) <code>--repo frontend</code> <code>--dry-run</code> Preview what would be deleted without actually deleting <p>New in v2.0: - <code>--subcommand</code>: Selective cleaning by subcommand - <code>--reset</code>: Complete base directory reset for unified configuration migrations - <code>--workspace</code>, <code>--repo</code>, <code>--repos</code>: File tracking filters for granular cleanup - <code>--dry-run</code>: Preview mode for safe cleanup operations</p>"},{"location":"reference/cli_reference/#examples_5","title":"Examples","text":""},{"location":"reference/cli_reference/#clean-output-files-keep-config","title":"Clean Output Files (Keep Config)","text":"<pre><code># Remove all generated files except migration_config.json\nmigrate_bitbucket_to_github clean\n</code></pre>"},{"location":"reference/cli_reference/#clean-all-files-including-config","title":"Clean All Files (Including Config)","text":"<pre><code># Remove everything including configuration\nmigrate_bitbucket_to_github clean --all\n</code></pre>"},{"location":"reference/cli_reference/#selective-cleaning-v20","title":"Selective Cleaning (v2.0)","text":"<pre><code># Clean only audit outputs\nmigrate_bitbucket_to_github clean --subcommand audit\n\n# Clean only migration outputs\nmigrate_bitbucket_to_github clean --subcommand migrate\n\n# Clean multiple subcommands\nmigrate_bitbucket_to_github clean --subcommand audit migrate cross-link\n\n# Reset base directory for unified config\nmigrate_bitbucket_to_github clean --reset\n\n# Preview cleanup without deleting\nmigrate_bitbucket_to_github clean --dry-run\n\n# Clean specific repository files (with file tracking)\nmigrate_bitbucket_to_github clean --workspace myworkspace --repo frontend\n</code></pre>"},{"location":"reference/cli_reference/#cleanup-after-migration","title":"Cleanup After Migration","text":"<pre><code># After successful migration and verification\nmigrate_bitbucket_to_github clean\n\n# Or if you want to start completely fresh\nmigrate_bitbucket_to_github clean --all\n</code></pre>"},{"location":"reference/cli_reference/#what-it-removes","title":"What It Removes","text":""},{"location":"reference/cli_reference/#default-mode-without-flags","title":"Default Mode (without flags)","text":"<ul> <li>All generated files except configuration</li> <li>Audit reports, migration logs, temporary directories</li> </ul>"},{"location":"reference/cli_reference/#selective-cleaning-v20_1","title":"Selective Cleaning (v2.0)","text":"<ul> <li><code>--subcommand audit</code>: Audit reports and outputs only</li> <li><code>--subcommand migrate</code>: Migration reports and outputs only</li> <li><code>--subcommand cross-link</code>: Cross-link reports and outputs only</li> <li><code>--reset</code>: Complete base directory reset for unified config (includes config and mappings)</li> </ul>"},{"location":"reference/cli_reference/#with-file-tracking-filters","title":"With File Tracking Filters","text":"<ul> <li><code>--workspace</code>: Filter by Bitbucket workspace name</li> <li><code>--repo</code> / <code>--repos</code>: Filter by repository name(s)</li> <li><code>--dry-run</code>: Preview mode (no files deleted)</li> </ul>"},{"location":"reference/cli_reference/#expected-output_1","title":"Expected Output","text":"<pre><code>\ud83e\uddf9 Cleaning output files (keeping configuration)...\n  \u2713 Removed bitbucket_audit_report.json\n  \u2713 Removed migration_report.md\n  \u2713 Removed directory attachments_temp\n  - migration_config.json not found (already clean)\n\u2705 Clean completed!\n</code></pre>"},{"location":"reference/cli_reference/#recommended-workflow","title":"\ud83d\udd04 Recommended Workflow","text":""},{"location":"reference/cli_reference/#phase-1-preparation-and-testing","title":"Phase 1: Preparation and Testing","text":"<pre><code># 1. Test authentication\nmigrate_bitbucket_to_github test-auth --workspace myteam --repo myproject --email user@example.com --gh-owner mygithubusername --gh-repo myproject\n\n# 2. Run comprehensive audit\nmigrate_bitbucket_to_github audit --workspace myteam --repo myproject \\\n  --email user@example.com \\\n  --gh-owner mygithubusername \\\n  --gh-repo myproject\n\n# 3. Review audit results\ncat audit_report.md\nls -la bitbucket_*.json\n\n# 4. Edit configuration\nvim migration_config.json\nvim user_mapping_template.txt\n</code></pre>"},{"location":"reference/cli_reference/#phase-2-pre-migration-validation","title":"Phase 2: Pre-Migration Validation","text":"<pre><code># 5. Test migration setup (dry run)\nmigrate_bitbucket_to_github migrate --config migration_config.json --dry-run\n\n# 6. Review dry-run results\ncat migration_report_dry_run.md\n\n# 7. Fix any issues found in dry run\n# - Update user mappings\n# - Check GitHub repository exists and is empty\n# - Verify git history is pushed\n</code></pre>"},{"location":"reference/cli_reference/#phase-3-actual-migration","title":"Phase 3: Actual Migration","text":"<pre><code># 8. Run the migration\nmigrate_bitbucket_to_github migrate --config migration_config.json\n\n# 9. Review migration results\ncat migration_report.md\n\n# 10. Handle attachments\n# Manually upload files from attachments_temp/ to GitHub issues\n</code></pre>"},{"location":"reference/cli_reference/#phase-4-post-migration-verification","title":"Phase 4: Post-Migration Verification","text":"<pre><code># 11. Verify migration completeness\nls -la migration_*.json migration_*.md\n\n# 12. Check for unmapped mentions or unhandled links\ngrep -n \"Unmapped\\|Unhandled\" migration_report.md\n\n# 13. Clean up (after verification)\nmigrate_bitbucket_to_github clean\n# Or for complete cleanup: migrate_bitbucket_to_github clean --all\n</code></pre>"},{"location":"reference/cli_reference/#common-use-cases","title":"\ud83d\udee0\ufe0f Common Use Cases","text":""},{"location":"reference/cli_reference/#use-case-1-simple-repository-migration","title":"Use Case 1: Simple Repository Migration","text":"<pre><code># For straightforward migrations with minimal attachments\nmigrate_bitbucket_to_github test-auth --workspace myteam --repo myproject --email user@example.com --gh-owner myuser --gh-repo myproject\nmigrate_bitbucket_to_github audit --workspace myteam --repo myproject --email user@example.com --gh-owner myuser --gh-repo myproject\nmigrate_bitbucket_to_github migrate --config migration_config.json --dry-run\nmigrate_bitbucket_to_github migrate --config migration_config.json\n</code></pre>"},{"location":"reference/cli_reference/#use-case-2-large-repository-with-many-attachments","title":"Use Case 2: Large Repository with Many Attachments","text":"<pre><code># For repositories with many/large attachments\nmigrate_bitbucket_to_github test-auth --workspace myteam --repo large-repo --email user@example.com --gh-owner myuser --gh-repo large-repo\n\nmigrate_bitbucket_to_github audit --workspace myteam --repo large-repo --email user@example.com --gh-owner myuser --gh-repo large-repo\n\n# Run dry-run first to validate setup\nmigrate_bitbucket_to_github migrate --config migration_config.json --dry-run\n\n# Run migration\nmigrate_bitbucket_to_github migrate --config migration_config.json\n</code></pre>"},{"location":"reference/cli_reference/#use-case-3-issues-only-migration","title":"Use Case 3: Issues-Only Migration","text":"<pre><code># When you only want to migrate issues, not PRs\nmigrate_bitbucket_to_github test-auth --workspace myteam --repo issues-only --email user@example.com --gh-owner myuser --gh-repo issues-only\nmigrate_bitbucket_to_github audit --workspace myteam --repo issues-only --email user@example.com --gh-owner myuser --gh-repo issues-only\nmigrate_bitbucket_to_github migrate --config migration_config.json --dry-run --skip-prs\nmigrate_bitbucket_to_github migrate --config migration_config.json --skip-prs\n</code></pre>"},{"location":"reference/cli_reference/#use-case-4-enterprise-migration-with-multiple-repositories","title":"Use Case 4: Enterprise Migration with Multiple Repositories","text":"<pre><code># For legacy per-repo configurations\n#!/bin/bash\n# enterprise_migration.sh\n\nORG=\"myenterprise\"\nEMAIL=\"admin@company.com\"\nGH_ORG=\"myenterprise\"\n\n# Migrate all repositories\nfor repo in $(cat repo_list.txt); do\n  echo \"Migrating $ORG/$repo...\"\n\n  # Test and audit\n  migrate_bitbucket_to_github test-auth --workspace $ORG --repo $repo --email $EMAIL --gh-owner $GH_ORG --gh-repo $repo\n  migrate_bitbucket_to_github audit --workspace $ORG --repo $repo --email $EMAIL --gh-owner $GH_ORG --gh-repo $repo\n\n  # Edit configuration with enterprise settings\n  # ... manual step: edit migration_config.json ...\n\n  # Dry run first\n  migrate_bitbucket_to_github migrate --config migration_config.json --dry-run\n\n  # Migrate\n  migrate_bitbucket_to_github migrate --config migration_config.json\n\n  echo \"Completed migration for $repo\"\ndone\n</code></pre>"},{"location":"reference/cli_reference/#use-case-5-unified-configuration-multi-repository-migration-v20","title":"Use Case 5: Unified Configuration Multi-Repository Migration (v2.0)","text":"<pre><code>#!/bin/bash\n# unified_multi_repo_migration.sh\n\n# Phase 0: Audit and create unified config\nmigrate_bitbucket_to_github audit \\\n  --workspace myworkspace \\\n  --repo repo-a --repo repo-b --repo repo-c \\\n  --email user@example.com \\\n  --gh-owner myorg \\\n  --base-dir ./migration_workspace\n\n# Edit the generated migration_config.json to fix user mappings\n# ... manual step ...\n\n# Phase 1: Dry run all repositories\nmigrate_bitbucket_to_github migrate --config migration_config.json --dry-run\n\n# Phase 1: Migrate all repositories\nmigrate_bitbucket_to_github migrate --config migration_config.json\n\n# Phase 2: Update cross-repository links\nmigrate_bitbucket_to_github cross-link --config migration_config.json\n\n# Clean up\nmigrate_bitbucket_to_github clean --reset\n</code></pre>"},{"location":"reference/cli_reference/#troubleshooting-cli-issues","title":"\ud83d\udd27 Troubleshooting CLI Issues","text":""},{"location":"reference/cli_reference/#authentication-problems","title":"Authentication Problems","text":"<pre><code># Always test authentication first\nmigrate_bitbucket_to_github test-auth --workspace WORKSPACE --repo REPO --email EMAIL --gh-owner GH_OWNER --gh-repo REPO --token TOKEN --gh-token GH_TOKEN\n\n# If GitHub authentication fails\ncurl -H \"Authorization: token ghp_...\" https://api.github.com/user\n</code></pre>"},{"location":"reference/cli_reference/#permission-issues","title":"Permission Issues","text":"<pre><code># Check if your token has the right permissions\n# Bitbucket: Test with a simple API call\ncurl -u EMAIL:TOKEN https://api.bitbucket.org/2.0/user\n\n# GitHub: Check repository access\ncurl -H \"Authorization: token ghp_...\" https://api.github.com/repos/OWNER/REPO\n</code></pre>"},{"location":"reference/cli_reference/#large-repository-handling","title":"Large Repository Handling","text":"<pre><code># For large repositories, run phases separately\nmigrate_bitbucket_to_github migrate --config config.json --skip-prs    # Issues only\nmigrate_bitbucket_to_github migrate --config config.json --skip-issues  # PRs only\n</code></pre>"},{"location":"reference/cli_reference/#network-and-timeout-issues","title":"Network and Timeout Issues","text":"<pre><code># The scripts handle rate limiting automatically, but for very slow connections:\n# - Run during off-peak hours\n# - Use migrate --dry-run first to estimate timing\n# - Consider running audit and migration separately\n</code></pre>"},{"location":"reference/cli_reference/#related-documentation","title":"\ud83d\udcda Related Documentation","text":"Topic Reference Description API Tokens <code>api_tokens.md</code> Complete authentication setup guide Configuration <code>migration_config.md</code> Configuration file format and options User Mapping <code>user_mapping.md</code> User mapping strategies and formats Migration Guide <code>../migration_guide.md</code> Step-by-step migration instructions with troubleshooting"},{"location":"reference/cli_reference/#tips-and-best-practices","title":"\ud83d\udca1 Tips and Best Practices","text":""},{"location":"reference/cli_reference/#cli-efficiency","title":"CLI Efficiency","text":"<ul> <li>Use <code>migrate --dry-run</code> first to validate your setup</li> <li>Run scripts during off-peak hours for large repositories</li> <li>Keep the <code>attachments_temp/</code> directory until migration is verified</li> </ul>"},{"location":"reference/cli_reference/#error-recovery","title":"Error Recovery","text":"<ul> <li>Scripts save partial results if interrupted (Ctrl+C)</li> <li>Check the generated reports for unmapped users or unhandled links</li> <li>Use the mapping files to track what has been migrated</li> </ul>"},{"location":"reference/cli_reference/#maintenance","title":"Maintenance","text":"<ul> <li>Keep API tokens secure and rotate them regularly</li> <li>Archive audit and migration reports for compliance</li> <li>Use <code>migrate_bitbucket_to_github clean</code> to remove generated files after migration</li> <li>Clean up <code>attachments_temp/</code> after successful migration (or let the clean command handle it)</li> </ul>"},{"location":"reference/cli_reference/#performance-optimization","title":"Performance Optimization","text":"<ul> <li>Run audit script first to understand repository size</li> <li>Use <code>--skip-pr-as-issue</code> for repositories where closed PR metadata isn't needed</li> <li>Consider migrating issues and PRs separately for very large repositories</li> </ul>"},{"location":"reference/cli_reference/#exit-codes","title":"\ud83d\udd0d Exit Codes","text":"Code Meaning Action 0 Success Migration completed successfully 1 Error Check error messages and fix issues <p>For detailed error information, check: - Console output for immediate errors - Generated report files for warnings - Log messages for troubleshooting details</p> <p>This CLI reference focuses on the unified migration tool with subcommands. For complete migration instructions, see the Migration Guide.</p>"},{"location":"reference/migration_attachments/","title":"Attachments Migration","text":""},{"location":"reference/migration_attachments/#overview","title":"Overview","text":"<p>Attachments are files that were explicitly attached to Bitbucket issues or pull requests. The migration tool handles both traditional attachments and inline images embedded in markdown content.</p>"},{"location":"reference/migration_attachments/#migrated-metadata","title":"Migrated Metadata","text":"<ul> <li>File Name and Size: Noted in GitHub comments.</li> <li>Association to Issues/PRs: Comments indicate which issue/PR the attachment belongs to.</li> <li>Download Location: All files saved to <code>attachments_temp/</code> for reference.</li> </ul>"},{"location":"reference/migration_attachments/#what-gets-created","title":"What Gets Created","text":"<p>Comments are added to issues/PRs noting attachments:</p>"},{"location":"reference/migration_attachments/#attachment-comments","title":"Attachment Comments","text":"<pre><code>\ud83d\udcce **Attachment from Bitbucket**: `screenshot.png` (2.5 MB)\n\n*Note: This file was attached to the original Bitbucket issue. Please drag and drop this file from `attachments_temp/screenshot.png` to embed it in this issue.*\n</code></pre>"},{"location":"reference/migration_attachments/#handling-non-migratable-information","title":"Handling Non-Migratable Information","text":"<ul> <li>Direct Upload: GitHub API does not support direct attachment upload; files are downloaded locally to <code>attachments_temp/</code>.</li> <li>Manual Upload Required: Comments are created on GitHub issues with instructions to drag-and-drop files.</li> <li>Informative Comments: The tool creates helpful comments with file names, sizes, and local paths for each attachment.</li> <li>Large Files: Files are downloaded regardless of size; GitHub has its own upload limits.</li> </ul>"},{"location":"reference/migration_attachments/#difference-from-inline-images","title":"Difference from Inline Images","text":"<ul> <li>Attachments: Explicitly attached files via Bitbucket's attachment interface</li> <li>Inline Images: Images embedded in markdown content using <code>![alt](url)</code> syntax</li> <li>Processing: Both are downloaded to <code>attachments_temp/</code>, but inline images are handled differently in content formatting (see Images Migration)</li> </ul>"},{"location":"reference/migration_comments/","title":"Comments Migration","text":""},{"location":"reference/migration_comments/#what-gets-migrated","title":"What Gets Migrated","text":"<p>Comments are added to issues/PRs with attribution:</p> <pre><code>**Comment by @alice-github on 2023-05-15:**\n\n[Original comment text]\n</code></pre>"},{"location":"reference/migration_comments/#what-is-preserved","title":"What IS Preserved","text":"<ul> <li>\u2705 Comment Text: Full content including markdown.</li> <li>\u2705 Original Author: @tagged for notifications.</li> <li>\u2705 Original Timestamp: Noted in comment.</li> <li>\u2705 Link Rewrites: Cross-references updated to GitHub URLs.</li> <li>\u2705 @Mentions: Updated to GitHub usernames.</li> <li>\u2705 Attachments: Downloaded and noted (see Attachments section).</li> </ul>"},{"location":"reference/migration_comments/#what-is-not-preserved","title":"What Is NOT Preserved","text":"<ul> <li>\u274c Comment Author: Shows as migration account.</li> <li>\u274c Comment Date: Shows as migration date.</li> <li>\u274c Comment Edit History: Only final version migrated. Content changes are noted in the comment body but edit history is not preserved.</li> <li>\u274c Threaded Replies: For PRs migrated as issues, replies are flattened with notes. For PRs migrated as PRs, inline review comments support threading.</li> <li>\u274c Inline Code Comments: PR code review comments are migrated as regular comments with code context information when inline attachment fails.</li> <li>\u274c Resolved/Unresolved Status: Comment resolution status not preserved.</li> </ul>"},{"location":"reference/migration_comments/#special-handling","title":"Special Handling","text":"<ul> <li>\u2705 Deleted Comments: Comments marked as deleted in Bitbucket are skipped during migration to avoid data pollution.</li> <li>\u2705 Pending Comments: Comments marked as pending approval in Bitbucket are migrated with a clear annotation: [PENDING APPROVAL] at the top of the comment body.</li> <li>\u2705 Threaded Replies:</li> <li>For PRs migrated as GitHub PRs, inline review comments support threading using GitHub's <code>in_reply_to</code> field.</li> <li>For PRs migrated as issues or other cases, replies are flattened with a note: [Reply to Bitbucket Comment {ID}].</li> <li>Comments are processed in topological order to ensure parents are created before replies.</li> </ul>"},{"location":"reference/migration_config/","title":"Migration Configuration Reference","text":"<p>This file defines how the migration tool connects to Bitbucket and GitHub, and how user identities are mapped.</p>"},{"location":"reference/migration_config/#configuration-format","title":"\ud83d\udd27 Configuration Format","text":"<p>The migration tool uses a unified configuration format (v2.0) that supports both single and multiple repository migrations.</p> <p>Key Features: - Single configuration format for all migration scenarios - Required <code>\"format_version\": \"2.0\"</code> field - Base directory management with standard subdirectories - Options grouped in <code>options</code> object - Template variable support (<code>{workspace}</code>, <code>{repo}</code>)</p>"},{"location":"reference/migration_config/#configuration-file","title":"\ud83d\udd27 Configuration File","text":"<p>The configuration file is typically named <code>config.json</code> and lives at the root of your migration workspace.</p> <pre><code>{\n  \"format_version\": \"2.0\",\n  \"base_dir\": \"./migration_workspace\",\n\n  \"bitbucket\": {\n    \"workspace\": \"myworkspace\",\n    \"email\": \"user@example.com\",\n    \"token\": \"${BITBUCKET_TOKEN}\"\n  },\n\n  \"github\": {\n    \"owner\": \"myorg\",\n    \"token\": \"${GITHUB_TOKEN}\"\n  },\n\n  \"repositories\": [\n    {\n      \"bitbucket_repo\": \"repo1\",\n      \"github_repo\": \"repo1\"\n    },\n    {\n      \"bitbucket_repo\": \"repo2\",\n      \"github_repo\": \"repo2-renamed\"\n    }\n  ],\n\n  \"external_repositories\": [\n    {\n      \"bitbucket_repo\": \"shared-lib\",\n      \"github_repo\": \"shared-lib\",\n      \"github_owner\": \"other-org\"\n    }\n  ],\n\n  \"options\": {\n    \"skip_issues\": false,\n    \"skip_prs\": false,\n    \"skip_pr_as_issue\": false\n  },\n\n  \"user_mapping\": {\n    \"Alice Smith\": {\n      \"github\": \"alice-smith-gh\",\n      \"bitbucket_username\": \"asmith\",\n      \"display_name\": \"Alice Smith\"\n    },\n    \"Bob Jones\": {\n      \"github\": \"bjones\",\n      \"bitbucket_username\": \"bjones\",\n      \"display_name\": \"Bob Jones\"\n    },\n    \"Unknown (deleted user)\": null\n  },\n\n  \"issue_type_mapping\": {\n    \"bug\": \"Bug\",\n    \"task\": \"Task\",\n    \"enhancement\": \"Feature Request\"\n  },\n\n  \"link_rewriting_config\": {\n    \"enabled\": true,\n    \"enable_notes\": true,\n    \"enable_markdown_context_awareness\": true,\n    \"note_templates\": {\n      \"issue_link\": \" *(was [BB #{bb_num}]({bb_url}))*\",\n      \"pr_link\": \" *(was [BB PR #{bb_num}]({bb_url}))*\",\n      \"commit_link\": \" *(was [Bitbucket]({bb_url}))*\",\n      \"branch_link\": \" *(was [Bitbucket]({bb_url}))*\",\n      \"compare_link\": \" *(was [Bitbucket]({bb_url}))*\",\n      \"repo_home_link\": \"\",\n      \"cross_repo_link\": \" *(was [Bitbucket]({bb_url}))*\",\n      \"short_issue_ref\": \" *(was BB `#{bb_num}`)*\",\n      \"pr_ref\": \" *(was BB PR `#{bb_num}`)*\",\n      \"mention\": \"\",\n      \"default\": \" *(migrated link)*\"\n    }\n  },\n\n  \"cross_repo_mappings_file\": \"cross_repo_mappings.json\"\n}\n</code></pre>"},{"location":"reference/migration_config/#configuration-fields","title":"\ud83d\udd27 Configuration Fields","text":""},{"location":"reference/migration_config/#required-fields","title":"Required Fields","text":"Field Type Description <code>format_version</code> string Must be \"2.0\" - identifies the configuration format <code>bitbucket.workspace</code> string Bitbucket Cloud workspace name <code>bitbucket.email</code> string Your Atlassian email for API authentication <code>github.owner</code> string GitHub user/org name for destination repositories <code>repositories</code> array List of repositories to migrate"},{"location":"reference/migration_config/#optional-fields","title":"Optional Fields","text":"Field Type Default Description <code>base_dir</code> string <code>\".\"</code> Base directory for migration workspace <code>bitbucket.token</code> string - Bitbucket API token (or use BITBUCKET_TOKEN env var) <code>github.token</code> string - GitHub PAT (or use GITHUB_TOKEN env var) <code>external_repositories</code> array <code>[]</code> Repositories referenced but not migrated <code>options</code> object <code>{}</code> Migration control options <code>user_mapping</code> object <code>{}</code> Bitbucket to GitHub user mapping <code>issue_type_mapping</code> object <code>{}</code> Bitbucket issue types to GitHub issue types <code>link_rewriting_config</code> object <code>{}</code> Link rewriting behavior and templates <code>cross_repo_mappings_file</code> string <code>\"cross_repo_mappings.json\"</code> Path to shared mappings file"},{"location":"reference/migration_config/#repository-configuration","title":"Repository Configuration","text":"<p>Each repository in the <code>repositories</code> array:</p> Field Type Required Description <code>bitbucket_repo</code> string Yes Name of the Bitbucket repository <code>github_repo</code> string Yes Name of the destination GitHub repository"},{"location":"reference/migration_config/#external-repository-configuration","title":"External Repository Configuration","text":"<p>External repositories are referenced in links but not migrated:</p> Field Type Required Description <code>bitbucket_repo</code> string Yes Name of the Bitbucket repository <code>github_repo</code> string No Name of the GitHub repository (if null, links are preserved) <code>github_owner</code> string No GitHub owner/org (defaults to main config)"},{"location":"reference/migration_config/#options-configuration","title":"Options Configuration","text":"<p>Migration control options grouped in the <code>options</code> object:</p> Field Type Default Description <code>skip_issues</code> boolean <code>false</code> Skip migrating issues <code>skip_prs</code> boolean <code>false</code> Skip migrating pull requests <code>skip_pr_as_issue</code> boolean <code>false</code> Skip migrating closed PRs as issues"},{"location":"reference/migration_config/#directory-structure","title":"\ud83d\udcc1 Directory Structure","text":"<p>The migration tool uses a standardized directory structure based on the <code>base_dir</code> setting:</p> <pre><code>{base_dir}/                    # Base directory (defaults to \".\")\n\u251c\u2500\u2500 config.json                # Configuration file\n\u251c\u2500\u2500 cross_repo_mappings.json   # Shared cross-repository mappings\n\u251c\u2500\u2500 audit/                     # Audit command outputs\n\u2502   \u2514\u2500\u2500 {workspace}_{repo}/    # Per-repository audit results\n\u251c\u2500\u2500 dry-run/                   # Dry-run command outputs\n\u2502   \u2514\u2500\u2500 {workspace}_{repo}/    # Per-repository dry-run results\n\u2514\u2500\u2500 migrate/                   # Migration command outputs\n    \u2514\u2500\u2500 {workspace}_{repo}/    # Per-repository migration results\n</code></pre> <p>Key Points: - Config file lives at <code>{base_dir}/config.json</code> - Each subcommand creates its own subdirectory - Outputs are organized by workspace and repository - Cross-repository mappings file is shared at the base level</p>"},{"location":"reference/migration_config/#configuration-validation","title":"\ud83d\udd27 Configuration Validation","text":"<p>The tool validates configurations and provides clear error messages:</p>"},{"location":"reference/migration_config/#format-version-validation","title":"Format Version Validation","text":"<pre><code>Error: Unsupported config format. Expected version 2.0, got 1.0.\nSee docs/reference/migration_config.md for current format.\n</code></pre>"},{"location":"reference/migration_config/#required-fields-validation","title":"Required Fields Validation","text":"<pre><code>Error: Config must have 'repositories' array.\nSee docs/reference/migration_config.md for format.\n</code></pre>"},{"location":"reference/migration_config/#legacy-format-detection","title":"Legacy Format Detection","text":"<pre><code>Error: Invalid config: 'repo' field not allowed in bitbucket/github sections.\nUse 'repositories' array instead.\n</code></pre>"},{"location":"reference/migration_config/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>\"format_version must be 2.0\": Update your config to use the v2.0 format</li> <li>\"'repositories' array required\": Convert from per-repo format to unified format</li> <li>\"'repo' field not allowed\": Remove <code>repo</code> fields from <code>bitbucket</code>/<code>github</code> sections</li> </ul>"},{"location":"reference/migration_config/#environment-variables","title":"\ud83c\udf0d Environment Variables","text":"<p>For security, tokens can be set via environment variables instead of in the config file. This prevents sensitive data from being stored in plain text.</p>"},{"location":"reference/migration_config/#supported-variables","title":"Supported Variables","text":"Variable Description Required <code>BITBUCKET_TOKEN</code> Bitbucket API token Yes <code>BITBUCKET_API_TOKEN</code> Alternative Bitbucket API token Yes <code>GITHUB_TOKEN</code> GitHub Personal Access Token Yes <code>GITHUB_API_TOKEN</code> Alternative GitHub API token Yes"},{"location":"reference/migration_config/#usage","title":"Usage","text":"<ol> <li> <p>Set the variables in your shell:    <pre><code>export BITBUCKET_TOKEN=\"your_bitbucket_token\"\nexport GITHUB_TOKEN=\"your_github_token\"\n</code></pre></p> </li> <li> <p>Or create a <code>.env</code> file in the project root:    <pre><code>BITBUCKET_TOKEN=your_bitbucket_token\nGITHUB_TOKEN=your_github_token\n</code></pre></p> </li> <li> <p>The system will automatically load tokens from env vars if not present in the config file.</p> </li> </ol>"},{"location":"reference/migration_config/#security-benefits","title":"Security Benefits","text":"<ul> <li>Tokens are not stored in version control</li> <li>Easier to manage in CI/CD environments</li> <li>Reduces risk of accidental exposure</li> </ul>"},{"location":"reference/migration_config/#user-mapping-rules","title":"\ud83d\udc65 User Mapping Rules","text":"<p>The user mapping now supports an enhanced format that includes display names and Bitbucket usernames for better mapping accuracy.</p>"},{"location":"reference/migration_config/#simple-format-legacy","title":"Simple Format (Legacy)","text":"<pre><code>\"user_mapping\": {\n  \"Alice Smith\": \"alice-github\",\n  \"Bob Jones\": \"bjones\",\n  \"External Consultant\": null\n}\n</code></pre>"},{"location":"reference/migration_config/#enhanced-format-recommended","title":"Enhanced Format (Recommended)","text":"<pre><code>\"user_mapping\": {\n  \"Alice Smith\": {\n    \"github\": \"alice-github\",\n    \"bitbucket_username\": \"asmith\",\n    \"display_name\": \"Alice Smith\"\n  },\n  \"Bob Jones\": {\n    \"github\": \"bjones\",\n    \"bitbucket_username\": \"bjones\",\n    \"display_name\": \"Bob Jones\"\n  },\n  \"External Contractor\": null\n}\n</code></pre>"},{"location":"reference/migration_config/#mapping-rules","title":"Mapping Rules","text":"<ul> <li>If a Bitbucket user does not have a GitHub account, map to <code>null</code>.</li> <li>Deleted users can be represented as <code>\"Unknown (deleted user)\": null</code>.</li> <li>Use GitHub usernames, not emails.</li> <li>The enhanced format provides better accuracy for @mentions and display name resolution.</li> <li>Display names are used when users are mentioned by name in comments (not just @username).</li> <li>You can edit <code>user_mapping</code> manually or import from <code>user_mapping_template.txt</code>.</li> </ul>"},{"location":"reference/migration_config/#link-rewriting-configuration","title":"Link Rewriting Configuration","text":"<p>This section controls how links are rewritten during migration, including templates for different link types and behavior settings.</p> <pre><code>\"link_rewriting_config\": {\n  \"enabled\": true,\n  \"enable_notes\": true,\n  \"enable_markdown_context_awareness\": true,\n  \"note_templates\": {\n    \"issue_link\": \" *(was [BB #{bb_num}]({bb_url}))*\",\n    \"pr_link\": \" *(was [BB PR #{bb_num}]({bb_url}))*\",\n    \"commit_link\": \" *(was [Bitbucket]({bb_url}))*\",\n    \"branch_link\": \" *(was [Bitbucket]({bb_url}))*\",\n    \"compare_link\": \" *(was [Bitbucket]({bb_url}))*\",\n    \"repo_home_link\": \"\",\n    \"cross_repo_link\": \" *(was [Bitbucket]({bb_url}))*\",\n    \"short_issue_ref\": \" *(was BB `#{bb_num}`)*\",\n    \"pr_ref\": \" *(was BB PR `#{bb_num}`)*\",\n    \"mention\": \"\",\n    \"default\": \" *(migrated link)*\"\n  }\n}\n</code></pre>"},{"location":"reference/migration_config/#configuration-options","title":"Configuration Options","text":"<ul> <li><code>enabled</code>: Enable/disable link rewriting entirely</li> <li><code>enable_notes</code>: Add explanatory notes to rewritten links</li> <li><code>enable_markdown_context_awareness</code>: Handle links differently in markdown vs plain text</li> <li><code>note_templates</code>: Custom templates for different link types using <code>{bb_num}</code>, <code>{bb_url}</code>, <code>{gh_url}</code> placeholders</li> </ul>"},{"location":"reference/migration_config/#supported-link-types","title":"Supported Link Types","text":"<ul> <li>Issue/PR Links: Full URLs to issues and pull requests</li> <li>Commit Links: Links to specific commits</li> <li>Branch Links: Links to branch commit history</li> <li>Compare Links: Links to commit comparisons</li> <li>Repository Home: Links to repository root pages</li> <li>Cross-repo Links: Links between different repositories</li> <li>Short References: <code>#123</code> (issues) and <code>PR #456</code> (pull requests)</li> <li>@Mentions: User mentions that get rewritten to GitHub usernames</li> </ul>"},{"location":"reference/migration_config/#cross-repository-mappings","title":"Cross-Repository Mappings","text":"<p>For multi-repository migrations, use a shared mappings file to handle cross-repository links.</p> <pre><code>\"cross_repo_mappings_file\": \"cross_repo_mappings.json\"\n</code></pre> <p>This file contains mappings from Bitbucket repositories to their migrated GitHub locations, enabling proper link rewriting between repositories that haven't been migrated yet (deferred links).</p>"},{"location":"reference/migration_config/#phase-1-vs-phase-2-migration","title":"Phase 1 vs Phase 2 Migration","text":"<ul> <li>Phase 1: Migrate repositories and save mappings to the shared file</li> <li>Phase 2: Update cross-repository links using the complete mappings</li> </ul> <p>Use the <code>cross-link</code> subcommand for Phase 2 operations.</p>"},{"location":"reference/migration_config/#issue-type-mapping","title":"Issue Type Mapping","text":"<p>This optional section allows mapping Bitbucket issue types (kinds) to GitHub issue types. GitHub issue types are organization-specific and must be configured in your GitHub organization settings.</p> <pre><code>\"issue_type_mapping\": {\n  \"bug\": \"Bug\",\n  \"task\": \"Task\",\n  \"enhancement\": \"Feature Request\"\n}\n</code></pre>"},{"location":"reference/migration_config/#how-it-works","title":"How It Works","text":"<ul> <li>The tool fetches available GitHub issue types for your organization.</li> <li>It applies your custom mappings first, then attempts automatic matching based on case-insensitive name similarity (e.g., \"bug\" \u2192 \"Bug\").</li> <li>If a Bitbucket issue type is not mapped, it falls back to using labels or no type.</li> <li>Mappings are case-insensitive for both Bitbucket and GitHub types.</li> </ul>"},{"location":"reference/migration_config/#requirements","title":"Requirements","text":"<ul> <li>Only available for GitHub organizations (not personal repositories).</li> <li>GitHub issue types must be enabled and configured in your organization.</li> <li>If the specified GitHub type does not exist, the mapping is skipped with a warning.</li> </ul>"},{"location":"reference/migration_config/#tips","title":"Tips","text":"<ul> <li>Use the audit report (<code>audit_report.md</code>) to see all unique Bitbucket issue types.</li> <li>Map only the types you need; unmapped types will use fallback methods.</li> <li>Common mappings: \"bug\" \u2192 \"Bug\", \"task\" \u2192 \"Task\", \"enhancement\" \u2192 \"Feature Request\".</li> </ul>"},{"location":"reference/migration_config/#migration-control-options","title":"Migration Control Options","text":"<p>These boolean flags control various aspects of the migration process:</p> <pre><code>{\n  \"skip_issues\": false,\n  \"skip_prs\": false,\n  \"skip_pr_as_issue\": false\n}\n</code></pre> <ul> <li><code>skip_issues</code>: Skip migrating issues entirely</li> <li><code>skip_prs</code>: Skip migrating pull requests as PRs (but may still migrate as issues if <code>skip_pr_as_issue</code> is false)</li> <li><code>skip_pr_as_issue</code>: Skip migrating closed/merged PRs as issues</li> </ul>"},{"location":"reference/migration_config/#migration-workflow","title":"\ud83d\udccb Migration Workflow","text":""},{"location":"reference/migration_config/#phase-0-setup-and-audit","title":"Phase 0: Setup and Audit","text":"<ol> <li>Create unified config with <code>format_version: \"2.0\"</code></li> <li>Run audit to analyze repositories and generate user mappings</li> <li>Review and edit the config file with correct user mappings</li> </ol>"},{"location":"reference/migration_config/#phase-1-migrate-repositories","title":"Phase 1: Migrate Repositories","text":"<ol> <li>Migrate repositories one by one or all at once</li> <li>Cross-repo mappings are automatically saved to <code>cross_repo_mappings.json</code></li> <li>Links within migrated repos are rewritten immediately</li> </ol>"},{"location":"reference/migration_config/#phase-2-update-cross-repository-links","title":"Phase 2: Update Cross-Repository Links","text":"<ol> <li>Run <code>migrate_bitbucket_to_github cross-link</code> to rewrite deferred cross-repo links</li> <li>All repositories use the complete mappings file for accurate link rewriting</li> </ol>"},{"location":"reference/migration_config/#directory-organization","title":"Directory Organization","text":"<p>The tool automatically organizes outputs in standardized subdirectories:</p> <ul> <li>Audit outputs: <code>{base_dir}/audit/{workspace}_{repo}/</code></li> <li>Dry-run outputs: <code>{base_dir}/dry-run/{workspace}_{repo}/</code></li> <li>Migration outputs: <code>{base_dir}/migrate/{workspace}_{repo}/</code></li> </ul> <p>No manual <code>output_dir</code> configuration needed - the tool handles this automatically.</p>"},{"location":"reference/migration_config/#tips_1","title":"\ud83d\udca1 Tips","text":"<ul> <li>Use the audit report (<code>audit_report.md</code>) to find active users and issue types.</li> <li>Focus mapping on high-activity users first.</li> <li>If unsure about a user mapping, set to <code>null</code> \u2014 the tool will still credit them by name.</li> <li>For multi-repo migrations, the <code>cross_repo_mappings_file</code> is automatically managed.</li> <li>Customize <code>note_templates</code> to match your organization's style preferences.</li> <li>The <code>format_version: \"2.0\"</code> field is required for all new configurations.</li> <li>Use environment variables for tokens instead of storing them in the config file.</li> <li>External repositories help with accurate cross-repo link rewriting.</li> </ul>"},{"location":"reference/migration_details/","title":"Migration Reference","text":"<p>This reference document provides detailed information on how specific elements from Bitbucket are migrated to GitHub, including what metadata is preserved and how non-migratable information is handled.</p>"},{"location":"reference/migration_details/#overview","title":"Overview","text":"<p>The migration script preserves as much metadata as possible while adapting to GitHub's structure. For elements that cannot be directly migrated (e.g., due to API limitations or platform differences), the script adds contextual notes to descriptions or comments to maintain transparency.</p>"},{"location":"reference/migration_details/#migration-strategy","title":"Migration Strategy","text":""},{"location":"reference/migration_details/#issue-migration","title":"Issue Migration","text":"<ul> <li>All Bitbucket issues become GitHub issues</li> <li>Original numbers are preserved using placeholder issues for gaps</li> <li>Example: BB issues #1, #2, #5 \u2192 GH issues #1, #2, #3 (placeholder), #4 (placeholder), #5</li> </ul>"},{"location":"reference/migration_details/#pull-request-migration","title":"Pull Request Migration","text":"<p>The script uses an intelligent strategy:</p> <ul> <li>OPEN PRs with existing branches \u2192 GitHub PRs (remain open)</li> <li>OPEN PRs with missing branches \u2192 GitHub Issues</li> <li>MERGED/DECLINED/SUPERSEDED PRs \u2192 GitHub Issues (safest approach to avoid re-merging)</li> </ul> <p>This prevents accidentally re-merging already-merged code while preserving all metadata.</p>"},{"location":"reference/migration_details/#known-limitations","title":"Known Limitations","text":""},{"location":"reference/migration_details/#api-restrictions","title":"API Restrictions","text":"<p>These limitations are imposed by GitHub's API and cannot be worked around:</p> <ul> <li>No backdating: GitHub API doesn't allow setting creation dates - all migrated content shows today's date</li> <li>No author spoofing: Cannot create content as other users - all content shows migration account as author</li> <li>No PR reviewers: Cannot set reviewers during PR creation via API</li> <li>No attachment uploads: Direct file upload not supported by standard GitHub API</li> <li>No code review comments: Inline PR code review comments cannot be migrated via API</li> <li>No edit history: Only the final version of content is migrated</li> <li>No watchers: Cannot set issue/PR watchers via API</li> </ul>"},{"location":"reference/migration_details/#platform-differences","title":"Platform Differences","text":"<ul> <li>Shared Numbering: GitHub PRs and issues share the same numbering sequence</li> <li>No Issue Types: GitHub doesn't have 'bug', 'enhancement', etc. as built-in fields (noted in description)</li> <li>No Priority: GitHub doesn't have priority levels (noted in description)</li> <li>No Wiki API: Bitbucket wikis must be migrated separately</li> </ul>"},{"location":"reference/migration_details/#workarounds-implemented","title":"Workarounds Implemented","text":"<ul> <li>Timestamps: Noted in descriptions/comments with original dates</li> <li>Authors: @mentioned for notifications and transparency</li> <li>Reviewers: Listed in PR description for reference</li> <li>Attachments: Downloaded locally with informative comments for manual upload</li> <li>Issue Types/Priority: Noted in description for reference</li> <li>Deleted Issue Numbers: Filled with placeholder issues to preserve numbering</li> </ul>"},{"location":"reference/migration_details/#why-this-matters","title":"Why This Matters","text":"<p>Understanding what is preserved vs. not preserved has important implications for your team:</p>"},{"location":"reference/migration_details/#activity-history-is-lost","title":"Activity History is Lost","text":"<ul> <li>Issues and PRs show as created by the migration account</li> <li>Affects contribution stats and team metrics</li> <li>Cannot filter by \"author:alice\" in GitHub searches</li> <li>All activity credit goes to migration account</li> </ul>"},{"location":"reference/migration_details/#notifications-and-transparency","title":"Notifications and Transparency","text":"<ul> <li>@Mentions Notify Real Users: Original authors are @tagged in descriptions, so they receive notifications and know issues reference them</li> <li>Clear Attribution: Every issue/PR/comment clearly states original author and date</li> <li>Transparency: Notes like \"Migrated from Bitbucket\" make the migration obvious</li> </ul>"},{"location":"reference/migration_details/#continuity-preserved","title":"Continuity Preserved","text":"<ul> <li>Assignees are Preserved: Work assignments remain intact, ensuring continuity</li> <li>Milestones Maintained: Project planning structure preserved</li> <li>Cross-References Work: Links between issues/PRs updated to point to GitHub</li> </ul>"},{"location":"reference/migration_details/#search-and-discovery","title":"Search and Discovery","text":"<ul> <li>Searchability Affected: Original creation dates are not preserved, so time-based searches will use migration dates</li> <li>Content Searchable: All text content is fully searchable in GitHub</li> <li>Link Navigation: Cross-references between issues work correctly</li> </ul>"},{"location":"reference/migration_details/#manual-work-required","title":"Manual Work Required","text":"<ul> <li>Attachments: Must be uploaded manually via drag-and-drop (GitHub API limitation)</li> <li>Inline Images: May need manual integration into comments (see Images Migration)</li> <li>Unhandled Links: Some Bitbucket links require manual updates post-migration</li> <li>Unmapped Users: Users without GitHub accounts should be mapped if they later join</li> </ul> <p>This trade-off prioritizes preserving actionable information (assignees, @mentions, cross-references) over historical accuracy (exact authors/dates), while maintaining transparency through descriptive notes. The migration report provides detailed information about what was migrated and what needs manual attention.</p>"},{"location":"reference/migration_details/#migration-details","title":"Migration Details","text":"<ul> <li> <p>Issues</p> </li> <li> <p>Pull Requests</p> </li> <li> <p>Comments </p> </li> <li> <p>Attachments</p> </li> <li> <p>Images</p> </li> <li> <p>Links and Cross-Links</p> </li> <li> <p>@Mentions</p> </li> <li> <p>Milestones</p> </li> </ul>"},{"location":"reference/migration_images/","title":"Images Migration","text":""},{"location":"reference/migration_images/#overview","title":"Overview","text":"<p>Inline images are images embedded in markdown content using <code>![alt](url)</code> syntax. Unlike traditional attachments, these are part of the text content and are handled during content formatting.</p>"},{"location":"reference/migration_images/#migrated-metadata","title":"Migrated Metadata","text":"<ul> <li>Image URLs in Markdown: Preserved in text, with notes for manual upload.</li> <li>Alt Text: Maintained in markdown syntax.</li> <li>Bitbucket-Hosted Inline Images: Automatically detected and extracted from markdown.</li> </ul>"},{"location":"reference/migration_images/#what-gets-detected","title":"What Gets Detected","text":"<p>The script scans for:</p> <ul> <li>Markdown image syntax: <code>![alt](https://bitbucket.org/.../image.png)</code></li> <li>Images in issue/PR descriptions</li> <li>Images in comments</li> <li>Bitbucket-hosted images only (external URLs preserved as-is)</li> </ul>"},{"location":"reference/migration_images/#what-gets-created","title":"What Gets Created","text":"<p>Inline images are modified in the markdown content with upload instructions:</p>"},{"location":"reference/migration_images/#dry-run-mode","title":"Dry Run Mode","text":"<pre><code>![Screenshot](https://bitbucket.org/workspace/repo/images/screenshot.png)\n\n\ud83d\udcf7 *Inline image: `screenshot.png` (will be downloaded to attachments_temp)*\n</code></pre>"},{"location":"reference/migration_images/#manual-upload","title":"Manual Upload","text":"<pre><code>![Screenshot](https://bitbucket.org/workspace/repo/images/screenshot.png)\n\n\ud83d\udcf7 *Original Bitbucket image (download from `attachments_temp/screenshot.png` and drag-and-drop here)*\n</code></pre>"},{"location":"reference/migration_images/#handling-non-migratable-information","title":"Handling Non-Migratable Information","text":"<ul> <li>Bitbucket-Hosted Images: Detected and downloaded to <code>attachments_temp/</code>.</li> <li>Inline Image Detection: Scans issue/PR descriptions and comments for <code>![alt](url)</code> syntax.</li> <li>Upload Notes: Added to descriptions/comments indicating where to find and upload images.</li> <li>Manual Upload Required: Images must be manually uploaded via drag-and-drop due to GitHub API limitations.</li> <li>External Images: Images hosted elsewhere (imgur, etc.) are left as-is.</li> </ul>"},{"location":"reference/migration_images/#difference-from-attachments","title":"Difference from Attachments","text":"<ul> <li>Inline Images: Embedded in markdown content using <code>![alt](url)</code> syntax</li> <li>Traditional Attachments: Explicitly attached files via Bitbucket's attachment interface</li> <li>Processing: Both are downloaded to <code>attachments_temp/</code>, but inline images modify the markdown content directly (see Attachments Migration)</li> </ul>"},{"location":"reference/migration_issues/","title":"Issues Migration","text":""},{"location":"reference/migration_issues/#what-gets-migrated","title":"What Gets Migrated","text":"<p>Issues are created on GitHub with the following structure:</p> <pre><code>**Migrated from Bitbucket**\n- Original Author: @alice-github (or **Alice Smith** *(no GitHub account)*)\n- Original Created: 2023-05-15T10:30:00Z\n- Original URL: https://bitbucket.org/...\n- Kind: bug\n- Priority: major\n\n---\n\n[Original issue description]\n</code></pre> <p>GitHub displays:</p> <ul> <li>Reporter: Your migration account (the person running the script)</li> <li>Created Date: Today (migration date)</li> <li>Assignee: Can be set if mapped (API supports this)</li> </ul>"},{"location":"reference/migration_issues/#what-is-preserved","title":"What IS Preserved","text":"<ul> <li>\u2705 Issue Numbers: Preserved exactly from Bitbucket (placeholders fill gaps).</li> <li>\u2705 Title: Migrated as-is.</li> <li>\u2705 Description: Full content with markdown preserved.</li> <li>\u2705 Assignees: Set via API if user mapping exists.</li> <li>\u2705 Labels: Applied (e.g., 'migrated-from-bitbucket', 'type: {kind}', 'priority: {priority}').</li> <li>\u2705 Milestones: Automatically created on GitHub and applied to issues.</li> <li>\u2705 State (open/closed): Set based on original state.</li> <li>\u2705 Original Timestamps: Mentioned in description.</li> <li>\u2705 Original Authors: Mentioned and @tagged in description for notifications.</li> <li>\u2705 Votes: Noted in description.</li> <li>\u2705 Kind and Priority: Noted in description and applied as labels.</li> <li>\u2705 Issue Types: Mapped to GitHub issue types if configured, otherwise fall back to labels.</li> <li>\u2705 Comments: All comments migrated with topological sorting for threaded replies.</li> <li>\u2705 Attachments: Downloaded and uploaded to GitHub.</li> <li>\u2705 Inline Images: Extracted and uploaded to GitHub.</li> <li>\u2705 Issue Changes: Status, assignee, and other changes are migrated as comments.</li> </ul>"},{"location":"reference/migration_issues/#what-is-not-preserved","title":"What Is NOT Preserved","text":"<ul> <li>\u274c Original Author as Creator: API limitation - migration account is shown as creator.</li> <li>\u274c Original Creation Date: API limitation - shows migration date.</li> <li>\u274c Watchers: No equivalent field in GitHub.</li> <li>\u274c Custom Fields: Bitbucket custom fields are not migrated.</li> <li>\u274c Issue Type Native Mapping: Falls back to labels if no GitHub issue type configured.</li> <li>\u274c Comment Edit History: Only final version migrated, changes noted in comment body.</li> </ul>"},{"location":"reference/migration_issues/#handling-non-migratable-information","title":"Handling Non-Migratable Information","text":"<ul> <li>Deleted Users: Noted as \"Unknown (deleted user)\" in description and comments.</li> <li>Unmapped Users: Mentioned as \"Name (no GitHub account)\" in description; not assigned.</li> <li>Placeholders for Gaps: Issues deleted in Bitbucket are created as closed placeholder issues to maintain numbering.</li> <li>Attachments and Images: See Attachment Migration and Image Migration.</li> </ul>"},{"location":"reference/migration_links/","title":"Links and Cross-Links Migration","text":""},{"location":"reference/migration_links/#what-gets-rewritten","title":"What Gets Rewritten","text":""},{"location":"reference/migration_links/#same-repository-links-automatic","title":"Same Repository Links (Automatic)","text":"<p>No configuration needed - these are automatically rewritten:</p> <ul> <li>Issues: <code>https://bitbucket.org/workspace/repo/issues/42</code> \u2192 <code>[#45](github_url)</code> (was BB #42)</li> <li>Source Files: <code>https://bitbucket.org/.../src/hash/file.cpp#lines-143</code> \u2192 <code>[file.cpp](github_url#L143)</code></li> <li>Commits: <code>https://bitbucket.org/.../commits/abc123</code> \u2192 <code>[abc123](github_url)</code></li> <li>Short References: <code>#123</code> \u2192 <code>[#125](github_url)</code> (was BB #123)</li> <li>PR References: <code>PR #45</code> \u2192 <code>[#127](github_url)</code> (was BB PR #45, migrated as issue)</li> </ul>"},{"location":"reference/migration_links/#cross-repository-links-requires-configuration","title":"Cross-Repository Links (Requires Configuration)","text":"<p>Add <code>repository_mapping</code> to your config to enable:</p> <ul> <li>Repository Home: <code>https://bitbucket.org/workspace/other-repo</code> \u2192 <code>[other-repo](github_url)</code></li> <li>Issues: <code>https://bitbucket.org/workspace/other-repo/issues/42</code> \u2192 <code>[other-repo #42](github_url)</code></li> <li>Source Files: <code>https://bitbucket.org/workspace/other-repo/src/hash/file.cpp</code> \u2192 <code>[other-repo/file.cpp](github_url)</code></li> <li>Commits: <code>https://bitbucket.org/workspace/other-repo/commits/abc123</code> \u2192 <code>[other-repo@abc123d](github_url)</code></li> <li>Pull Requests: <code>https://bitbucket.org/workspace/other-repo/pull-requests/42</code> \u2192 <code>[other-repo #42](github_url)</code></li> </ul>"},{"location":"reference/migration_links/#what-is-not-rewritten","title":"What Is NOT Rewritten","text":"<ul> <li>Wiki Pages: <code>https://bitbucket.org/.../wiki/</code></li> <li>Downloads: <code>https://bitbucket.org/.../downloads/</code></li> <li>Branches/Tags: <code>https://bitbucket.org/.../branch/feature</code></li> <li>New PR/Compare Pages: UI-specific URLs</li> <li>Repository Images: <code>https://bitbucket.org/repo/UUID/images/...</code></li> </ul>"},{"location":"reference/migration_links/#handling-non-migratable-information","title":"Handling Non-Migratable Information","text":"<ul> <li>Unhandled Links: Flagged in migration reports with context.</li> <li>Current Repository Links: Automatically rewritten without needing repository_mapping.</li> <li>Cross-Repo Links: Can be rewritten if repository_mapping configured in cross_repo_mappings.json.</li> <li>Original References: Preserved in italics for context (e.g., (was <code>[BB #123](bitbucket_url)</code>)).</li> <li>Manual Attention: Unmapped cross-repo links or unsupported types require manual review post-migration.</li> <li>Line Numbers: Bitbucket's <code>#lines-143</code> format converted to GitHub's <code>#L143</code>.</li> <li>Deferred Links: Cross-repo links are processed in a second pass after all repositories are migrated.</li> </ul>"},{"location":"reference/migration_mentions/","title":"Mentions Migration","text":""},{"location":"reference/migration_mentions/#what-gets-migrated","title":"What Gets Migrated","text":"<ul> <li>@Mentions: Mapped to GitHub usernames using <code>user_mapping</code>.</li> <li>Account IDs: Automatically resolved by cross-referencing with issue/PR participants, or via Bitbucket API lookup.</li> <li>Display Names: Used when Bitbucket username is not available.</li> <li>Enhanced User Mapping: Supports detailed mapping configurations with bitbucket_username, display_name, and github fields.</li> </ul>"},{"location":"reference/migration_mentions/#formats-supported","title":"Formats Supported","text":"<p>The script handles multiple @mention formats:</p> <ul> <li>Simple: <code>@username</code></li> <li>Braced: <code>@{username-with-dashes}</code></li> <li>Spaces: <code>@{user name with spaces}</code></li> <li>Account IDs: <code>@557058:c250d1e9-df76-4236-bc2f-a98d056b56b5</code></li> </ul>"},{"location":"reference/migration_mentions/#what-is-preserved","title":"What IS Preserved","text":"<ul> <li>\u2705 @Mention Intent: Users are notified via GitHub @mentions.</li> <li>\u2705 Context: Original mention preserved if unmapped.</li> <li>\u2705 Display Names: Used for readability when username unavailable.</li> </ul>"},{"location":"reference/migration_mentions/#handling-non-migratable-information","title":"Handling Non-Migratable Information","text":"<ul> <li>Unmapped Users: Preserved as \"@username (Bitbucket user, needs GitHub mapping)\".</li> <li>Account IDs with Display Names: Replaced with \"Display Name (Bitbucket user, no GitHub account)\".</li> <li>Unresolvable Account IDs: If API lookup fails (403 or deleted user), left as-is with warning note.</li> <li>Deleted Users: Noted as \"Unknown (deleted user)\".</li> <li>No GitHub Account: Users mapped to <code>null</code> are mentioned in text but not assigned or @tagged.</li> </ul>"},{"location":"reference/migration_mentions/#resolution-process","title":"Resolution Process","text":"<ol> <li>Check if mention is a username or account ID</li> <li>If account ID, resolve to username via:</li> <li>Issue/PR participant data (primary method)</li> <li>Bitbucket API lookup (fallback if not found)</li> <li>Display name only (if username unavailable)</li> <li>Map username/display name to GitHub via <code>user_mapping</code></li> <li>Support enhanced mapping formats with bitbucket_username, display_name, and github fields</li> <li>If mapped: Replace with GitHub @mention</li> <li>If not mapped but have display name: Use readable format</li> <li>If not mapped and no display name: Preserve with note</li> <li>Handle null mappings (users with no GitHub account)</li> </ol>"},{"location":"reference/migration_milestones/","title":"Milestones Migration","text":""},{"location":"reference/migration_milestones/#overview","title":"Overview","text":"<p>Milestones are automatically migrated from Bitbucket to GitHub during the migration process. The migration preserves milestone metadata and assigns issues and PRs to their corresponding milestones.</p>"},{"location":"reference/migration_milestones/#what-gets-migrated","title":"What Gets Migrated","text":""},{"location":"reference/migration_milestones/#milestone-properties","title":"Milestone Properties","text":"<ul> <li>\u2705 Name: Preserved exactly from Bitbucket</li> <li>\u2705 Description: Migrated if present in Bitbucket</li> <li>\u2705 Due Date: Migrated and converted to GitHub format</li> <li>\u2705 State: Preserved ('open' or 'closed')</li> </ul>"},{"location":"reference/migration_milestones/#assignments","title":"Assignments","text":"<ul> <li>\u2705 Issue Associations: Issues are assigned to correct milestones</li> <li>\u2705 PR Associations: PRs (and PRs-as-issues) are assigned to correct milestones</li> </ul>"},{"location":"reference/migration_milestones/#tracking","title":"Tracking","text":"<ul> <li>\u2705 Milestone Mapping: Tracked in migration report</li> <li>\u2705 Duplicate Detection: Existing milestones reused, not recreated</li> </ul>"},{"location":"reference/migration_milestones/#what-is-not-preserved","title":"What Is NOT Preserved","text":"<ul> <li>\u274c Completion Percentage: Calculated by GitHub based on closed issues</li> <li>\u274c Creation/Update Timestamps: Set to migration time on GitHub</li> </ul>"},{"location":"reference/migration_milestones/#migration-process","title":"Migration Process","text":""},{"location":"reference/migration_milestones/#phase-1-milestone-creation","title":"Phase 1: Milestone Creation","text":"<ol> <li>Fetch all milestones from Bitbucket</li> <li>Fetch existing milestones from GitHub (to detect duplicates)</li> <li>For each Bitbucket milestone:</li> <li>Check if milestone with same name already exists</li> <li>If duplicate: Log warning and use existing milestone</li> <li>If new: Create milestone on GitHub with all properties</li> <li>Build milestone lookup table for issue/PR assignment</li> </ol>"},{"location":"reference/migration_milestones/#phase-2-issuepr-assignment","title":"Phase 2: Issue/PR Assignment","text":"<ol> <li>During issue migration, assign milestone based on Bitbucket data</li> <li>During PR migration, assign milestone for both PRs and PRs-as-issues</li> <li>Log warnings if milestone referenced but not found</li> </ol>"},{"location":"reference/migration_milestones/#duplicate-handling","title":"Duplicate Handling","text":"<p>When a milestone name already exists on GitHub: - \u26a0\ufe0f Warning logged: \"Milestone '{name}' already exists on GitHub (#{number})\" - \u2705 Existing milestone reused: No new milestone created - \u2705 Issues/PRs assigned: To the existing milestone - \u2139\ufe0f Reported: Marked as duplicate in migration report</p>"},{"location":"reference/migration_milestones/#error-handling","title":"Error Handling","text":""},{"location":"reference/migration_milestones/#common-issues","title":"Common Issues","text":"<ol> <li>Invalid due date format: Logged as error, milestone created without due date</li> <li>Missing required fields: Milestone creation skipped, logged as warning</li> <li>API errors: Retried with exponential backoff, logged appropriately</li> <li>Permission errors: Clear error message indicating token permissions needed</li> </ol>"},{"location":"reference/migration_milestones/#recovery","title":"Recovery","text":"<ul> <li>Milestone migration errors don't stop issue/PR migration</li> <li>Issues/PRs can be manually assigned to milestones post-migration</li> <li>Failed milestones can be recreated manually or by re-running migration</li> </ul>"},{"location":"reference/migration_milestones/#migration-report","title":"Migration Report","text":"<p>The migration report includes: - Total milestones processed - Successfully created vs. duplicates - Milestone properties (name, state, due date, description) - Issues/PRs assigned to each milestone - Any warnings or errors encountered</p>"},{"location":"reference/migration_milestones/#example-report-section","title":"Example Report Section","text":"<pre><code>## Milestones\n\n**Total Milestones Processed:** 5\n  - Created on GitHub: 3\n  - Already Existed (Duplicates): 2\n\n| Name | GitHub # | State | Due Date | Description | Remarks |\n|------|----------|-------|----------|-------------|---------|\n| Sprint 1 | #1 | closed | 2024-01-31 | Initial development phase | - |\n| Version 1.0 | #2 | open | 2024-06-30 | First major release | - |\n| Version 2.0 | #3 | open | - | Second major release | Reused existing milestone |\n</code></pre>"},{"location":"reference/migration_milestones/#logging-output","title":"Logging Output","text":"<p>During migration, you'll see detailed logging for milestone operations:</p> <pre><code>Creating milestones on GitHub...\n  Found 5 milestones in Bitbucket\n  Found 2 existing milestones on GitHub\n  Processing milestone: Version 1.0\n    \u2713 Created milestone #1: Version 1.0\n  Processing milestone: Version 2.0\n    \u26a0\ufe0f  Milestone 'Version 2.0' already exists on GitHub (#2)\n  \u2713 Milestone migration complete:\n    Created: 3\n    Reused (duplicates): 2\n\nMigrating issue #42: Fix login bug\n  Assigning to milestone: Version 1.0 (#1)\n  \u2713 Created issue #42 -&gt; #42\n</code></pre>"},{"location":"reference/migration_milestones/#configuration","title":"Configuration","text":"<p>No special configuration required. Milestones are migrated automatically.</p>"},{"location":"reference/migration_milestones/#token-permissions","title":"Token Permissions","text":"<p>Ensure GitHub token has <code>repo</code> scope for milestone creation.</p>"},{"location":"reference/migration_milestones/#manual-post-migration-steps","title":"Manual Post-Migration Steps","text":"<p>If needed, you can: 1. Adjust milestone due dates 2. Update milestone descriptions 3. Close completed milestones 4. Reassign issues/PRs to different milestones</p>"},{"location":"reference/migration_milestones/#api-references","title":"API References","text":"<ul> <li>Bitbucket: <code>GET /2.0/repositories/{workspace}/{repo}/milestones</code></li> <li>GitHub: <code>POST /repos/{owner}/{repo}/milestones</code></li> <li>GitHub: <code>GET /repos/{owner}/{repo}/milestones</code></li> </ul>"},{"location":"reference/migration_milestones/#implementation-details","title":"Implementation Details","text":""},{"location":"reference/migration_milestones/#components","title":"Components","text":"<ol> <li>MilestoneMigrator</li> <li>Handles all milestone migration logic</li> <li>Performs duplicate detection</li> <li> <p>Creates milestones with full metadata</p> </li> <li> <p>GitHubClient Methods</p> </li> <li><code>get_milestones()</code>: Fetch all milestones with pagination</li> <li><code>get_milestone_by_title()</code>: Find milestone by exact title</li> <li> <p><code>create_milestone()</code>: Create new milestone with metadata</p> </li> <li> <p>RepoMigrator Integration</p> </li> <li>Calls milestone migration before issues/PRs</li> <li>Passes milestone lookup to migrators</li> <li>Tracks records for reporting</li> </ol> <p>Note: These components are part of the source code in the <code>src/bitbucket_migration/</code> directory.</p>"},{"location":"reference/migration_milestones/#migration-flow","title":"Migration Flow","text":"<pre><code>1. RepoMigrator._create_milestones()\n   \u2193\n2. MilestoneMigrator.migrate_milestones()\n   \u2193\n3. Fetch Bitbucket milestones\n   \u2193\n4. Fetch existing GitHub milestones\n   \u2193\n5. For each milestone:\n   - Check duplicates\n   - Create if new OR use existing\n   \u2193\n6. Return milestone_lookup dict\n   \u2193\n7. IssueMigrator/PullRequestMigrator\n   - Use lookup to assign milestones\n</code></pre>"},{"location":"reference/migration_milestones/#troubleshooting","title":"Troubleshooting","text":""},{"location":"reference/migration_milestones/#milestone-not-assigned-to-issue","title":"Milestone Not Assigned to Issue","text":"<p>Symptoms: Issue migrated but no milestone assigned</p> <p>Causes: - Milestone name in Bitbucket doesn't match created milestone - Milestone creation failed but issue migration continued - Milestone was in Bitbucket but not fetched by API</p> <p>Solutions: 1. Check migration log for milestone warnings 2. Verify milestone exists on GitHub 3. Manually assign milestone post-migration</p>"},{"location":"reference/migration_milestones/#duplicate-milestone-created","title":"Duplicate Milestone Created","text":"<p>Symptoms: Two milestones with same/similar names on GitHub</p> <p>Causes: - Name matching is case-sensitive - Whitespace differences in names</p> <p>Solutions: 1. Merge duplicate milestones on GitHub 2. Reassign issues/PRs to correct milestone 3. Delete extra milestone</p>"},{"location":"reference/migration_milestones/#invalid-due-date-error","title":"Invalid Due Date Error","text":"<p>Symptoms: Milestone created but without due date</p> <p>Causes: - Invalid date format from Bitbucket - Date parsing error</p> <p>Solutions: - Milestone still created successfully - Manually set due date on GitHub - Check migration log for details</p>"},{"location":"reference/migration_milestones/#best-practices","title":"Best Practices","text":"<ol> <li>Pre-Migration:</li> <li>Review Bitbucket milestones before migrating</li> <li>Clean up duplicate or unused milestones</li> <li> <p>Verify milestone names are consistent</p> </li> <li> <p>During Migration:</p> </li> <li>Monitor logs for milestone warnings</li> <li>Note any duplicates detected</li> <li> <p>Track failed milestone creations</p> </li> <li> <p>Post-Migration:</p> </li> <li>Verify all milestones created correctly</li> <li>Check issue/PR milestone assignments</li> <li>Update milestone due dates if needed</li> <li>Close completed milestones</li> </ol>"},{"location":"reference/migration_milestones/#dry-run-mode","title":"Dry-Run Mode","text":"<p>Milestone migration fully supports dry-run mode: - Simulates milestone creation - Returns mock milestone data - Logs all actions that would be taken - No actual GitHub API calls made - Safe for testing configuration</p>"},{"location":"reference/migration_pull_requests/","title":"Pull Requests Migration","text":""},{"location":"reference/migration_pull_requests/#what-gets-migrated","title":"What Gets Migrated","text":"<p>Pull Requests follow a similar pattern to issues:</p> <pre><code>**Migrated from Bitbucket**\n- Original Author: @alice-github (or **Alice Smith** *(no GitHub account)*)\n- Original Created: 2023-05-15T10:30:00Z\n- Original URL: https://bitbucket.org/...\n\n---\n\n[Original PR description]\n</code></pre> <p>For PRs migrated as GitHub Issues (merged/closed/declined):</p> <pre><code>\u26a0\ufe0f **This was a Pull Request on Bitbucket (migrated as an issue)**\n\n**Original PR Metadata:**\n- Author: @alice-github\n- State: MERGED\n- Created: 2023-05-15T10:30:00Z\n- Updated: 2023-05-16T14:22:00Z\n- Source Branch: `feature-xyz`\n- Destination Branch: `main`\n- Original URL: https://bitbucket.org/...\n\n---\n\n**Description:**\n\n[Original PR description]\n\n---\n\n*Note: This PR was merged on Bitbucket. It was migrated as a GitHub issue to preserve all metadata and comments. The actual code changes are in the git history.*\n</code></pre> <p>GitHub displays:</p> <ul> <li>Author: Migration account (API limitation).</li> <li>Created Date: Migration date.</li> <li>Assignees: Can be set if mapped.</li> </ul>"},{"location":"reference/migration_pull_requests/#what-is-preserved","title":"What IS Preserved","text":"<ul> <li>\u2705 Title: Migrated as-is (prefixed with <code>[PR #N]</code> if migrated as issue).</li> <li>\u2705 Description: Full content with markdown preserved.</li> <li>\u2705 Assignees: Set via API if user mapping exists.</li> <li>\u2705 Labels: Applied (e.g., 'migrated-from-bitbucket', 'original-pr', 'pr-merged').</li> <li>\u2705 State: Open PRs remain open; merged/closed PRs become closed issues.</li> <li>\u2705 Original Timestamps: Mentioned in description.</li> <li>\u2705 Original Authors: Mentioned and @tagged in description.</li> <li>\u2705 Source/Destination Branches: Noted in description.</li> <li>\u2705 Commit Count: Noted in description.</li> <li>\u2705 Participant Count: Noted in description.</li> <li>\u2705 All Comments: General comments, inline code comments, and PR updates are migrated as GitHub comments, preserving the timeline.</li> <li>\u2705 Inline Code Comments: Migrated as regular comments with code context information when inline attachment fails.</li> <li>\u2705 PR Activity: Status changes, approvals, and updates are migrated as comments.</li> <li>\u2705 Reviewers: Listed in PR description but not set as official reviewers.</li> <li>\u2705 Attachments: Downloaded and uploaded to GitHub.</li> <li>\u2705 Inline Images: Extracted and uploaded to GitHub.</li> </ul>"},{"location":"reference/migration_pull_requests/#what-is-not-preserved","title":"What Is NOT Preserved","text":"<ul> <li>\u274c PR Numbers: PRs share GitHub's issue numbering sequence, so numbers may change.</li> <li>\u274c Original Author as Creator: Migration account is shown as author.</li> <li>\u274c Original Creation Date: Shows migration date.</li> <li>\u274c Reviewers: Cannot be set via API during creation (noted in description).</li> <li>\u274c Approval Status: PR reviews cannot be migrated (noted in description).</li> <li>\u274c Diff View: For PRs migrated as issues, no interactive diff available.</li> <li>\u274c Inline Review Comments: Migrated as regular comments with code context when inline attachment fails.</li> <li>\u274c PR Review Threads: Not preserved as GitHub review threads.</li> </ul>"},{"location":"reference/migration_pull_requests/#handling-non-migratable-information","title":"Handling Non-Migratable Information","text":"<ul> <li>Merged/Declined PRs: Migrated as closed issues to preserve metadata without risking re-merge.</li> <li>Missing Branches: PRs with missing branches become issues; noted in description.</li> <li>Deleted Users: Noted as \"Unknown (deleted user)\".</li> <li>Unmapped Users: Mentioned as \"Name (no GitHub account)\".</li> <li>Labels: Added based on original state (e.g., 'pr-merged', 'pr-declined', 'original-pr').</li> <li>Reviewers: Listed in PR description but not set as official reviewers.</li> <li>PR Updates: Changes to PR title, description, reviewers, or new commits are migrated as comments to preserve the activity timeline.</li> </ul>"},{"location":"reference/user_mapping/","title":"User Mapping Reference","text":"<p>User mapping ensures migrated issues, pull requests, and comments are correctly attributed to GitHub users. This document provides comprehensive guidance on configuring user mappings to handle all Bitbucket user identification scenarios during migration.</p>"},{"location":"reference/user_mapping/#overview","title":"\ud83c\udfaf Overview","text":"<p>The migration tool supports multiple user identification methods in Bitbucket and maps them to GitHub usernames. Understanding these mechanisms is crucial for accurate user attribution and @mention functionality.</p> <p>Key Concepts:</p> <ul> <li>Display Names: Human-readable names shown in Bitbucket UI</li> <li>Usernames: Internal Bitbucket usernames used in @mentions</li> <li>Account IDs: Internal Bitbucket identifiers (UUIDs) used in API responses</li> <li>GitHub Usernames: Target GitHub usernames for mapping</li> </ul>"},{"location":"reference/user_mapping/#user-mapping-formats","title":"\ud83d\udccb User Mapping Formats","text":"<p>The migration tool supports multiple mapping formats to handle different Bitbucket user identification scenarios.</p>"},{"location":"reference/user_mapping/#format-1-simple-display-name-mapping","title":"Format 1: Simple Display Name Mapping","text":"<p>Maps Bitbucket display names directly to GitHub usernames. Best for basic use cases.</p> <pre><code>\"user_mapping\": {\n  \"Alice Smith\": \"alice-github\",\n  \"Bob Jones\": \"bobjones\",\n  \"Charlie Brown\": null,\n  \"External Contractor\": null\n}\n</code></pre> <p>Use when: - @mentions are infrequent or not critical - Simple one-to-one mapping is sufficient - Manual @mention fixes after migration are acceptable</p>"},{"location":"reference/user_mapping/#format-2-enhanced-mapping-recommended","title":"Format 2: Enhanced Mapping (Recommended)","text":"<p>Provides complete mapping information including both display names and Bitbucket usernames. Essential for @mention support.</p> <pre><code>\"user_mapping\": {\n  \"Alice Smith\": {\n    \"github\": \"alice-github\",\n    \"bitbucket_username\": \"asmith\",\n    \"display_name\": \"Alice Smith\"\n  },\n  \"Bob Jones\": {\n    \"github\": \"bobjones\",\n    \"bitbucket_username\": \"bjones\",\n    \"display_name\": \"Bob Jones\"\n  },\n  \"Charlie Brown\": null,\n  \"External Contractor\": null\n}\n</code></pre> <p>Use when: - Team uses @mentions frequently - Maximum compatibility required - Account ID mentions need proper resolution - Display names appear in comments and need mapping to GitHub users</p> <p>Note: The <code>display_name</code> field is optional in the enhanced format. If omitted, the key itself is used as the display name for matching purposes.</p>"},{"location":"reference/user_mapping/#format-3-direct-username-mapping","title":"Format 3: Direct Username Mapping","text":"<p>Maps Bitbucket usernames directly to GitHub usernames. Useful for @mention-only scenarios.</p> <pre><code>\"user_mapping\": {\n  \"asmith\": \"alice-github\",\n  \"bjones\": \"bobjones\",\n  \"old-user\": null\n}\n</code></pre> <p>Use when: - You only need to fix @mentions - Display names are handled separately - Quick mapping for specific users</p> <p>Note: This format maps Bitbucket usernames directly. It does not handle display name mapping in comments. Use enhanced format for complete coverage.</p>"},{"location":"reference/user_mapping/#format-4-mixed-format","title":"Format 4: Mixed Format","text":"<p>Combines multiple formats for maximum flexibility.</p> <pre><code>\"user_mapping\": {\n  \"Alice Smith\": {\n    \"github\": \"alice-github\",\n    \"bitbucket_username\": \"asmith\"\n  },\n  \"Bob Jones\": \"bobjones\",\n  \"charlie\": \"charlie-dev\",\n  \"external-user\": null,\n  \"contractor\": null\n}\n</code></pre> <p>Use when: - Different users require different mapping approaches - Complex organizational structures - Gradual migration of mapping strategies</p> <p>Note: Mixed format allows combining simple string mappings with enhanced object mappings. The system automatically detects the format for each user entry.</p>"},{"location":"reference/user_mapping/#account-id-resolution","title":"\ud83d\udd0d Account ID Resolution","text":"<p>Bitbucket uses internal account IDs that appear in content and API responses. The migration tool automatically resolves these to usernames.</p>"},{"location":"reference/user_mapping/#account-id-formats","title":"Account ID Formats","text":"<p>AAID Format (Modern): <pre><code>@557058:c250d1e9-df76-4236-bc2f-a98d056b56b5\n</code></pre> - Contains colons (:) - UUID-like structure - Most common in current Bitbucket instances</p> <p>Legacy Format: <pre><code>@5d80e691b29eab0c3cba6a2e\n</code></pre> - Exactly 24 hexadecimal characters - No colons - From older Bitbucket instances</p>"},{"location":"reference/user_mapping/#how-resolution-works","title":"How Resolution Works","text":"<ol> <li>Collection Phase: Migration tool scans all Bitbucket data to build account ID mappings</li> <li> <p>API Data Extraction: Extracts <code>account_id</code> \u2192 <code>username</code> relationships from:</p> <ul> <li>Issue reporters and assignees</li> <li>PR authors and participants</li> <li>Comment authors</li> <li>Commit authors</li> </ul> </li> <li> <p>Comment Scanning: Additionally scans all issue and PR comments for account IDs not captured in metadata</p> </li> <li> <p>API Lookup: For unresolved account IDs found in comments, performs API lookups to resolve them</p> </li> <li> <p>Runtime Resolution: During migration:</p> <ul> <li>Account IDs in content are identified</li> <li>Resolved to Bitbucket usernames using collected mappings</li> <li>Usernames are then mapped to GitHub usernames</li> <li>Unresolvable IDs are handled gracefully</li> </ul> </li> </ol>"},{"location":"reference/user_mapping/#resolution-example","title":"Resolution Example","text":"<pre><code>// During migration, this account ID:\n\"@557058:c250d1e9-df76-4236-bc2f-a98d056b56b5\"\n\n// Gets resolved through these steps:\n// 1. Account ID found in API data for user \"asmith\"\n// 2. \"asmith\" maps to display name \"Alice Smith\"\n// 3. \"Alice Smith\" maps to GitHub username \"alice-github\"\n// 4. Final result: \"@alice-github\"\n\n// Display names in comments are also mapped:\n// Original comment: \"Alice Smith mentioned this issue\"\n// Becomes: \"@alice-github mentioned this issue\"\n</code></pre>"},{"location":"reference/user_mapping/#mention-processing","title":"\ud83d\udcac @Mention Processing","text":"<p>The migration tool processes @mentions in all content and rewrites them to GitHub format.</p>"},{"location":"reference/user_mapping/#processing-strategy","title":"Processing Strategy","text":"<ol> <li> <p>Pattern Detection: Uses regex to find @mentions in:</p> <ul> <li>Issue descriptions</li> <li>PR descriptions</li> <li>Comments (issues and PRs)</li> <li>Any markdown content</li> </ul> </li> <li> <p>Format Handling: Processes multiple @mention formats:</p> <ul> <li><code>@username</code> (standard)</li> <li><code>@{user name}</code> (with braces for special characters)</li> <li><code>@557058:c250d1e9-...</code> (account IDs)</li> </ul> </li> <li> <p>Mapping Application: For each mention found:</p> <ul> <li>Extract the Bitbucket identifier</li> <li>Apply user mapping configuration</li> <li>Generate appropriate GitHub mention or fallback</li> </ul> </li> <li> <p>Display Name Mapping: When display names appear in comments (not as @mentions):</p> <ul> <li>Extract display names from comment text</li> <li>Map them to GitHub usernames using configured display_name mappings</li> <li>Convert to @mentions for proper GitHub attribution</li> </ul> </li> <li> <p>Fallback Handling: For unmapped mentions:</p> <ul> <li>Account IDs with known display names: `Display Name (Bitbucket user, no GitHub account)</li> <li>Usernames without display names: `@username (Bitbucket user, needs GitHub mapping)</li> </ul> </li> </ol>"},{"location":"reference/user_mapping/#mention-patterns","title":"@Mention Patterns","text":"<p>Standard Username: <pre><code>Original: @asmith mentioned this issue\nMapped:   @alice-github mentioned this issue\n</code></pre></p> <p>Braced Username: <pre><code>Original: @{john.doe} commented on the PR\nMapped:   @john-doe commented on the PR\n</code></pre></p> <p>Account ID: <pre><code>Original: @557058:c250d1e9-df76-4236-bc2f-a98d056b56b5 needs to review\nMapped:   @alice-github needs to review\n</code></pre></p>"},{"location":"reference/user_mapping/#unmapped-mention-handling","title":"Unmapped @Mention Handling","text":"<p>When @mentions cannot be mapped:</p> <p>For Account IDs with Display Names: <pre><code>Original: @557058:c250d1e9-df76-4236-bc2f-a98d056b56b5 commented\nBecomes: **Alice Smith** *(Bitbucket user, no GitHub account)*\n</code></pre></p> <p>For Usernames without Display Names: <pre><code>Original: @unknown-user mentioned this\nBecomes: @unknown-user *(Bitbucket user, needs GitHub mapping)*\n</code></pre></p>"},{"location":"reference/user_mapping/#validation-and-error-handling","title":"\u2705 Validation and Error Handling","text":"<p>The migration tool includes comprehensive validation and error handling for user mappings.</p>"},{"location":"reference/user_mapping/#pre-migration-validation","title":"Pre-Migration Validation","text":"<p>Configuration Validation:</p> <ul> <li>Verifies <code>user_mapping</code> section exists</li> <li>Checks for valid JSON structure</li> <li>Validates mapping value types</li> </ul> <p>Connection Testing:</p> <ul> <li>Tests Bitbucket API connectivity</li> <li>Tests GitHub API connectivity (read-only)</li> <li>Validates repository access permissions</li> </ul> <p>User Mapping Diagnostics:</p> <ul> <li>Scans all content for @mentions and account IDs</li> <li>Tests mapping resolution for found mentions</li> <li>Reports unmappable mentions with suggestions</li> </ul>"},{"location":"reference/user_mapping/#runtime-error-handling","title":"Runtime Error Handling","text":"<p>Mapping Failures:</p> <ul> <li>Gracefully handles missing user mappings</li> <li>Preserves original content when mapping fails</li> <li>Logs detailed information for post-migration review</li> </ul> <p>API Errors:</p> <ul> <li>Handles temporary API failures</li> <li>Retries failed operations where appropriate</li> <li>Provides clear error messages for configuration issues</li> </ul> <p>Data Issues:</p> <ul> <li>Handles deleted or inaccessible users</li> <li>Manages missing branch information for PRs</li> <li>Processes malformed or corrupted content</li> </ul>"},{"location":"reference/user_mapping/#logging-and-reporting","title":"Logging and Reporting","text":"<p>Migration Log Output: <pre><code>[2024-01-15 10:30:15] \u2192 @mentions: 45 mapped, 3 unmapped/replaced\n[2024-01-15 10:30:15]     (Account IDs replaced with display names where available)\n</code></pre></p> <p>Migration Report Sections:</p> <ul> <li>User mapping summary with success/failure counts</li> <li>Unmapped mentions report with resolution suggestions</li> <li>Account ID resolution statistics</li> <li>Troubleshooting recommendations</li> </ul>"},{"location":"reference/user_mapping/#integration-with-audit-script","title":"\ud83d\udee0\ufe0f Integration with Audit Script","text":"<p>The audit subcommand (<code>migrate_bitbucket_to_github audit</code>) is essential for effective user mapping configuration.</p>"},{"location":"reference/user_mapping/#user-discovery-process","title":"User Discovery Process","text":"<ol> <li> <p>Run Initial Audit: <pre><code>migrate_bitbucket_to_github audit --workspace YOUR_WORKSPACE --repo YOUR_REPO --email YOUR_EMAIL\n</code></pre></p> </li> <li> <p>Review Generated Files:</p> <ul> <li><code>bitbucket_audit_report.json</code> - Complete audit data</li> <li><code>audit_report.md</code> - Human-readable analysis</li> <li><code>user_mapping_template.txt</code> - Mapping template with activity counts</li> </ul> </li> <li> <p>Analyze User Activity: The audit provides:</p> <ul> <li>Complete list of all users found in repository</li> <li>Activity breakdown (issues, PRs, comments, commits)</li> <li>Bitbucket usernames for each user</li> <li>Account ID mentions and their contexts</li> <li>Account ID to username mappings discovered from API data</li> <li>Additional account ID resolutions from comment scanning</li> </ul> </li> </ol>"},{"location":"reference/user_mapping/#using-audit-results","title":"Using Audit Results","text":"<p>Activity-Based Prioritization: <pre><code># From user_mapping_template.txt:\n# Alice Smith\n#   Bitbucket username: asmith\n#   Activity: 15 issues, 8 PRs, 45 comments\n#   Total: 68\n#\n# Bob Jones\n#   Bitbucket username: bjones\n#   Activity: 3 issues, 12 PRs, 23 comments\n#   Total: 38\n</code></pre></p> <p>Account ID Analysis: The audit identifies items containing account ID mentions:</p> <ul> <li>Lists specific issues/PRs with account IDs</li> <li>Shows types of account IDs found</li> <li>Provides context for investigation</li> <li>Builds account ID to username/display name mappings from API data</li> <li>Performs additional API lookups for account IDs found in comments</li> </ul>"},{"location":"reference/user_mapping/#configuration-generation","title":"Configuration Generation","text":"<p>Generate Complete Configuration: <pre><code>migrate_bitbucket_to_github audit --workspace YOUR_WORKSPACE --repo YOUR_REPO --email YOUR_EMAIL \\\n  --gh-owner YOUR_GITHUB_USER --gh-repo YOUR_REPO\n</code></pre></p> <p>Generated Files:</p> <ul> <li><code>migration_config.json</code> - Complete configuration template</li> <li><code>user_mapping_template.txt</code> - Detailed mapping reference</li> </ul> <p>Configuration Generation:</p> <p>The audit command can generate complete migration configurations with:</p> <pre><code>migrate_bitbucket_to_github audit --workspace YOUR_WORKSPACE --repo YOUR_REPO --email YOUR_EMAIL \\\n  --gh-owner YOUR_GITHUB_USER --gh-repo YOUR_REPO\n</code></pre> <p>This creates a unified configuration file that includes user mappings, repository settings, and all discovered account ID mappings.</p>"},{"location":"reference/user_mapping/#setup-and-configuration","title":"\ud83d\udd27 Setup and Configuration","text":""},{"location":"reference/user_mapping/#step-1-run-audit-for-user-discovery","title":"Step 1: Run Audit for User Discovery","text":"<pre><code>migrate_bitbucket_to_github audit --workspace myworkspace --repo myrepo --email user@example.com\n</code></pre>"},{"location":"reference/user_mapping/#step-2-review-user-activity","title":"Step 2: Review User Activity","text":"<p>Examine <code>audit_report.md</code> and <code>user_mapping_template.txt</code>:</p> <ul> <li>Identify high-activity users (focus mapping effort here first)</li> <li>Note Bitbucket usernames for @mention support</li> <li>Identify users without GitHub accounts</li> </ul>"},{"location":"reference/user_mapping/#step-3-create-user-mapping-configuration","title":"Step 3: Create User Mapping Configuration","text":"<p>For teams with frequent @mentions: <pre><code>\"user_mapping\": {\n  \"Alice Smith\": {\n    \"github\": \"alice-github\",\n    \"bitbucket_username\": \"asmith\",\n    \"display_name\": \"Alice Smith\"\n  },\n  \"Bob Jones\": {\n    \"github\": \"bobjones\",\n    \"bitbucket_username\": \"bjones\",\n    \"display_name\": \"Bob Jones\"\n  },\n  \"External User\": null\n}\n</code></pre></p> <p>For simple cases: <pre><code>\"user_mapping\": {\n  \"Alice Smith\": \"alice-github\",\n  \"Bob Jones\": \"bobjones\",\n  \"External User\": null\n}\n</code></pre></p>"},{"location":"reference/user_mapping/#step-4-test-configuration","title":"Step 4: Test Configuration","text":"<pre><code>migrate_bitbucket_to_github dry-run --config migration_config.json\n</code></pre> <p>Review the output for:</p> <ul> <li>Unmapped @mentions warnings</li> <li>Account ID resolution messages</li> <li>User mapping validation errors</li> </ul>"},{"location":"reference/user_mapping/#step-5-refine-and-iterate","title":"Step 5: Refine and Iterate","text":"<ul> <li>Add missing GitHub usernames based on dry-run feedback</li> <li>Update account ID mappings if needed</li> <li>Re-run dry-run until no unmapped mentions remain</li> </ul>"},{"location":"reference/user_mapping/#troubleshooting-and-common-issues","title":"\ud83d\udea8 Troubleshooting and Common Issues","text":""},{"location":"reference/user_mapping/#issue-1-unmapped-mentions-after-migration","title":"Issue 1: Unmapped @Mentions After Migration","text":"<p>Symptoms:</p> <ul> <li>@mentions show as <code>@username *(Bitbucket user, needs GitHub mapping)*</code></li> <li>Account IDs appear as <code>**Display Name** *(Bitbucket user, no GitHub account)*</code></li> </ul> <p>Solutions:</p> <ol> <li> <p>Add Missing Username Mappings: <pre><code>\"user_mapping\": {\n  \"Display Name\": {\n    \"github\": \"github-username\",\n    \"bitbucket_username\": \"bb-username\"\n  }\n}\n</code></pre></p> </li> <li> <p>Check Audit Results:</p> <ul> <li>Review <code>user_mapping_template.txt</code> for complete user list</li> <li>Check activity counts to prioritize mapping effort</li> </ul> </li> <li> <p>Manual Fix on GitHub:</p> <ul> <li>Search for <code>*(Bitbucket user, needs GitHub mapping)*</code> pattern</li> <li>Edit mentions directly on GitHub</li> </ul> </li> </ol>"},{"location":"reference/user_mapping/#issue-2-account-ids-not-resolving","title":"Issue 2: Account IDs Not Resolving","text":"<p>Symptoms:</p> <ul> <li>Account IDs appear in content after migration</li> <li>Users report broken @mentions</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify API Permissions: <pre><code># Ensure your Bitbucket API token has user read permissions\nmigrate_bitbucket_to_github audit --workspace WORKSPACE --repo REPO --email EMAIL\n</code></pre></p> </li> <li> <p>Check Account ID Format:</p> <ul> <li>AAID format: <code>@557058:c250d1e9-df76-4236-bc2f-a98d056b56b5</code></li> <li>Legacy format: <code>@5d80e691b29eab0c3cba6a2e</code></li> </ul> </li> <li> <p>Manual Resolution:</p> <ul> <li>Look up account ID in original Bitbucket content</li> <li>Find corresponding username in audit results</li> <li>Add explicit mapping</li> </ul> </li> </ol>"},{"location":"reference/user_mapping/#issue-3-mixed-user-identification-methods","title":"Issue 3: Mixed User Identification Methods","text":"<p>Symptoms:</p> <ul> <li>Some users map correctly, others don't</li> <li>Inconsistent @mention behavior</li> </ul> <p>Solutions:</p> <ol> <li> <p>Use Enhanced Format for All Users: <pre><code>\"user_mapping\": {\n  \"User Name\": {\n    \"github\": \"github-username\",\n    \"bitbucket_username\": \"bb-username\"\n  }\n}\n</code></pre></p> </li> <li> <p>Standardize on Single Format:</p> <ul> <li>Choose either simple or enhanced format</li> <li>Apply consistently across all users</li> <li>Test thoroughly with dry-run</li> </ul> </li> </ol>"},{"location":"reference/user_mapping/#issue-4-large-number-of-unmapped-users","title":"Issue 4: Large Number of Unmapped Users","text":"<p>Symptoms:</p> <ul> <li>Many users without GitHub accounts</li> <li>Extensive unmapped mentions</li> </ul> <p>Solutions:</p> <ol> <li> <p>Prioritize by Activity:</p> <ul> <li>Focus on users with high activity counts first</li> <li>Use audit results to identify key contributors</li> </ul> </li> <li> <p>Batch Processing:</p> <ul> <li>Map users in phases (high \u2192 medium \u2192 low activity)</li> <li>Run multiple dry-run iterations</li> </ul> </li> <li> <p>Set Realistic Expectations:</p> <ul> <li>Accept that some users may remain unmapped</li> <li>Plan for manual fixes post-migration</li> </ul> </li> </ol>"},{"location":"reference/user_mapping/#validation-checklist","title":"\u2705 Validation Checklist","text":""},{"location":"reference/user_mapping/#pre-migration-validation_1","title":"Pre-Migration Validation","text":"<ul> <li>[ ] Run audit script and review all generated files</li> <li>[ ] Verify all high-activity users have GitHub accounts</li> <li>[ ] Check that @mention-heavy users use enhanced format</li> <li>[ ] Run dry-run and verify no unmapped mentions</li> <li>[ ] Confirm account ID resolution is working</li> <li>[ ] Test GitHub API connectivity and permissions</li> </ul>"},{"location":"reference/user_mapping/#configuration-validation","title":"Configuration Validation","text":"<ul> <li>[ ] <code>user_mapping</code> section exists in config</li> <li>[ ] All users have valid GitHub usernames or <code>null</code></li> <li>[ ] Enhanced format used for frequent @mention users</li> <li>[ ] No duplicate or conflicting mappings</li> <li>[ ] Configuration file is valid JSON</li> </ul>"},{"location":"reference/user_mapping/#content-validation","title":"Content Validation","text":"<ul> <li>[ ] All @mentions resolve to valid GitHub usernames</li> <li>[ ] Account IDs resolve to display names or usernames</li> <li>[ ] No broken user references in issue/PR content</li> <li>[ ] User assignment works correctly</li> <li>[ ] Comment attribution is accurate</li> </ul>"},{"location":"reference/user_mapping/#post-migration-validation","title":"Post-Migration Validation","text":"<ul> <li>[ ] Search GitHub repository for unmapped mention patterns</li> <li>[ ] Verify user assignments are correct</li> <li>[ ] Check that @mentions work in GitHub interface</li> <li>[ ] Confirm no account IDs remain in content</li> <li>[ ] Validate cross-references between issues/PRs</li> </ul>"},{"location":"reference/user_mapping/#best-practices","title":"\ud83c\udfaf Best Practices","text":""},{"location":"reference/user_mapping/#1-always-run-audit-first","title":"1. Always Run Audit First","text":"<p>The audit subcommand provides essential user discovery and analysis capabilities.</p>"},{"location":"reference/user_mapping/#2-use-enhanced-format-for-mentions","title":"2. Use Enhanced Format for @Mentions","text":"<p>When @mentions are important to your team, use the enhanced mapping format.</p>"},{"location":"reference/user_mapping/#3-test-thoroughly-with-dry-run","title":"3. Test Thoroughly with Dry-Run","text":"<p>Run multiple dry-run iterations and address all unmapped mentions before actual migration.</p>"},{"location":"reference/user_mapping/#4-prioritize-by-activity-level","title":"4. Prioritize by Activity Level","text":"<p>Focus mapping efforts on users with high activity counts first.</p>"},{"location":"reference/user_mapping/#5-plan-for-manual-fixes","title":"5. Plan for Manual Fixes","text":"<p>Accept that some edge cases may require manual fixes after migration.</p>"},{"location":"reference/user_mapping/#6-document-mapping-decisions","title":"6. Document Mapping Decisions","text":"<p>Keep notes on why certain users were mapped (or not mapped) for future reference.</p>"},{"location":"reference/user_mapping/#7-validate-post-migration","title":"7. Validate Post-Migration","text":"<p>Thoroughly validate user attribution and @mention functionality after migration.</p>"}]}